webpackJsonp([14],{HKG7:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("lHA8"),l=e.n(s),i=e("Gu7T"),n=e.n(i),o=e("gRE1"),r=e.n(o),_=e("mvHQ"),c=e.n(_),d=e("fZjL"),p=e.n(d),u={name:"vm-handle-tabs",props:{data_top:{type:Object,default:function(){}}},data:function(){return{tabsData:{activeIndex:0,data:[{title:"风险资产总数",count:this.data_top.total},{title:"高危资产数",count:this.data_top.high},{title:"中危资产数",count:this.data_top.medium},{title:"低危资产数",count:this.data_top.low}]}}}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"vm-handle-tabs"},[e("el-row",{staticClass:"va-main-1",attrs:{gutter:20,type:"flex",justify:"space-between"}},t._l(t.tabsData.data,function(a,s){return e("el-col",{key:s,staticClass:"va-tabs",class:{active:s==t.tabsData.activeIndex},attrs:{span:6}},[e("div",{staticClass:"va-tabs-item",on:{click:function(a){t.tabsData.activeIndex=s}}},[e("i",{staticClass:"vat-img"}),t._v(" "),e("span",{staticClass:"vat-title"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"vat-count"},[t._v(t._s(a.count))])])])}),1)],1)},staticRenderFns:[]};var h={name:"assets",components:{VmHandleTabs:e("VU/8")(u,m,!1,function(t){e("ZzBz")},"data-v-f4e98250",null).exports},data:function(){return{search_flag:!1,data_top:{},data_top_show:!1,assets_all:{tags:[],base:[{name:"基础分类",souce_value:[],value:[],toggle_show:!1,pid:0},{name:"业务",souce_value:[],value:[],toggle_show:!1,pid:1},{name:"分支",souce_value:[],value:[],toggle_show:!1,pid:2},{name:"部门",souce_value:[],value:[],toggle_show:!1,pid:3},{name:"其他",souce_value:[],value:[],toggle_show:!1,pid:4}]},toggle_top_show:!0,params:{key:"",threat:"",degree:"",status:""},options_threat:[{value:"1",label:"已失陷"}],options_degree:[{value:"high",label:"高危"},{value:"medium",label:"中危"},{value:"low",label:"低危"}],options_status:[{value:"1",label:"待处置"},{value:"2",label:"处置中"}],table:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[],loading:!0},state_change:!1,process_state:"",task:{new:!1,new_contet:!0},task_params:{name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",multiple:[]},task_new:{level_list:[{value:"highest",label:"最高"},{value:"high",label:"高"},{value:"medium",label:"中"},{value:"low",label:"低"}],operator_list:[]},table_operator:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:5},handle:{add:"",table_title:["资产"],active:0,dist:!1,save:!1},table_assets:{tableData:[],tableData_new:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[]},add_state_change:!1,table_add_works:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,loading:!0,multipleSelection:[]},add_params:{name:"",level:"",operator:[],notice:["email"],remarks:"",multiple:[],old_as:[],remind:["email"]}}},created:function(){this.get_list_top(),this.get_list_all(),this.get_list_risk()},methods:{get_list_top:function(){var t=this;this.$axios.get("/yiiapi/alert/risk-asset-top").then(function(a){t.data_top_show=!0;var e=a.data.data;t.data_top=e,t.$set(t.data_top,e)})},get_list_all:function(){var t=this;this.$axios.get("/yiiapi/alert/all-asset-labels").then(function(a){var e=a.data,s=e.status,l=e.data;if(0==s){l.base_category=l.base_category.map(function(t,a){return{name:t,flag:!1}}),l.business=l.business.map(function(t,a){return{name:t,flag:!1}}),l.branch=l.branch.map(function(t,a){return{name:t,flag:!1}}),l.department=l.department.map(function(t,a){return{name:t,flag:!1}});var i=l.others,n=[];p()(i).forEach(function(t){n.push({name:i[t],flag:!1})}),l.others=n,t.assets_all.base[0].value=t.assets_all.base[0].souce_value=l.base_category,t.assets_all.base[1].value=t.assets_all.base[1].souce_value=l.business,t.assets_all.base[2].value=t.assets_all.base[2].souce_value=l.branch,t.assets_all.base[3].value=t.assets_all.base[3].souce_value=l.department,t.assets_all.base[4].value=t.assets_all.base[4].souce_value=l.others}})},get_list_risk:function(){var t=this;this.table.loading=!0;var a={threat:0,label:[]};""!=this.params.threat&&(a.threat=1),this.assets_all.tags.forEach(function(t,e){a.label.push(t.name)}),a.label=c()(a.label),console.log(a.label),this.$axios.get("/yiiapi/alert/risk-asset",{params:{label:a.label,key_word:this.params.key,fall_certainty:a.threat,degree:this.params.degree,status:this.params.status,page:this.table.pageNow,rows:this.table.eachPage}}).then(function(a){t.table.loading=!1;var e=a.data,s=e.status,l=e.data;if(0==s){var i=l.data,n=l.count,o=l.maxPage,_=l.pageNow;i.map(function(t,a){var e=r()(t.label).join(","),s=t.category.join(",");t.label_group=e,t.category_group=s}),t.table.tableData=i,t.table.count=n,t.table.maxPage=o,t.table.pageNow=_,console.log(i)}}).catch(function(t){console.log(t)})},clickAllAssets:function(t,a,e,s){if(a){var l=this.assets_all.tags.findIndex(function(a){return a.name===t});this.assets_all.tags.splice(l,1),this.assets_all.base[e].value[s].flag=!1}else this.assets_all.tags.push({name:t,index:e,idx:s}),this.assets_all.base[e].value[s].flag=!0;this.search_flag||(this.params={key:"",threat:"",degree:"",status:""}),this.get_list_risk()},deleteAllAssets:function(t){var a=this.assets_all.tags;this.assets_all.base[t.index].value[t.idx].flag=!1;var e=a.findIndex(function(a){return a.name==t.name});this.assets_all.tags.splice(e,1),this.search_flag||(this.params={key:"",threat:"",degree:"",status:""}),this.get_list_risk()},toggle_types:function(t,a){var e=this.assets_all.base[t].souce_value,s=e.slice(0,15);this.assets_all.base[t].value=a?e:s,this.assets_all.base[t].toggle_show=!this.assets_all.base[t].toggle_show},submitClick:function(){this.search_flag=!0,this.get_list_risk()},resetClick:function(){this.assets_all.tags=[],this.assets_all.base[0].value.map(function(t){return t.flag=!1}),this.assets_all.base[1].value.map(function(t){return t.flag=!1}),this.assets_all.base[2].value.map(function(t){return t.flag=!1}),this.assets_all.base[3].value.map(function(t){return t.flag=!1}),this.assets_all.base[4].value.map(function(t){return t.flag=!1}),this.params={key:"",threat:"",degree:"",status:""},this.get_list_risk()},handleSizeChange:function(t){this.table.eachPage=t,this.table.pageNow=1,this.get_list_risk()},handleCurrentChange:function(t){this.table.pageNow=t,this.get_list_risk()},handleSelChange:function(t){this.table.multipleSelection=t},detailClick:function(t,a,e){this.$router.push({path:"/detail/assets",name:"detail_assets",query:{id:t.id,asset_ip:t.asset_ip,status:t.status}})},change_state:function(t){this.process_state=t,this.open_state()},change_task:function(t){"新建工单"==t?this.open_task_new():"添加到工单"==t&&this.open_add_new()},open_state:function(){if(0==this.table.multipleSelection.length)return this.$message({message:"请选择需要变更的资产！",type:"warning"}),!1;this.state_change=!0},closed_state:function(){this.state_change=!1,this.$refs.multipleTable.clearSelection()},cancel_state:function(){this.closed_state()},ok_state:function(){var t=this,a=this.table.multipleSelection.map(function(t){return t.asset_ip}),e=this.process_state,s=0;"处置中"==e?s=2:"已处置"==e?s=3:"已忽略"==e?s=4:"误报"==e&&(s=5),this.$axios.put("/yiiapi/alert/change-asset-status",{asset_ip:a,status:s}).then(function(a){var e=a.data,s=e.status;e.data;0==s?(t.$message.success("资产状态变更成功！"),t.closed_state(),t.get_list_risk()):t.$message.error("资产状态变更错误！")}).catch(function(t){console.log(t)})},open_task_new:function(){var t=this,a=this.table.multipleSelection,e=a.map(function(t){return t.status});if(0==a.length)return this.$message({message:"请选择需要编辑的资产！",type:"warning"}),!1;if(e.includes("3")||e.includes("4")||e.includes("5"))this.$message({message:"资产状态为已处置、已忽略、误报的不能新建。",type:"warning"});else{this.table_assets.tableData=a,this.table_assets.count=a.length;var s=this.table_assets.eachPage,l=this.table_assets.tableData.slice(0,s);this.table_assets.tableData_new=l,this.$axios.get("/yiiapi/site/user-list").then(function(a){var e=a.data,s=e.status,l=e.data;t.task_new.operator_list=0==s?l:[],t.task.new=!0,t.task.new_contet=!0}).catch(function(t){console.log("用户列表错误"),console.log(t)})}},closed_task_new:function(){this.task.new=!1,this.task.new_contet=!1,this.task_params={name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",multiple:[]},this.table_operator.tableData=[],this.table_assets.tableData_new=[],this.$refs.multipleTable.clearSelection()},next_task_new:function(){""==this.task_params.name?this.$message.error("工单名称不能为空"):""==this.task_params.level?this.$message.error("优先级未选择"):""==this.task_params.operator?this.$message.error("经办人未选择"):(this.task.new_contet=!1,this.handle.active=0)},prev_task_handle:function(){this.task.new_contet=!0},select_changced:function(t){this.table_operator.tableData.map(function(t){return t.id}).includes(t.id)?this.$message.error("已存在"):this.table_operator.tableData.unshift(t);var a=this.table_operator.tableData.map(function(t){return t.username});this.task_params.new_operator=a},sc_table_assets:function(t){this.table_assets.eachPage=t,this.table_assets.pageNow=1;var a=this.table_assets.tableData.slice(0,t);this.table_assets.tableData_new=a},hcc_table_assets:function(t){this.table_assets.pageNow=t;var a=this.table_assets.eachPage,e=this.table_assets.tableData.slice((t-1)*a,t*a);this.table_assets.tableData_new=e},handle_sel_table_assets:function(t){this.table_assets.multipleSelection=t;var a=t.map(function(t){return 1*t.id});this.task_params.multiple=a},table_btn_toggle:function(t){this.handle.active=t},prev_task_handle_assign:function(){var t=this;if(0==this.task_params.multiple.length){var a=this.table.multipleSelection.map(function(t){return 1*t.id});this.task_params.multiple=a}this.handle.save=!0,this.$axios.put("/yiiapi/asset/distribution-workorder",{name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,risk_asset:this.task_params.multiple,remind:this.task_params.notice,type:"asset"}).then(function(a){t.handle.save=!1;var e=a.data,s=e.status,l=e.msg;e.data;0==s?(t.$message.success("分配成功"),t.closed_task_new(),t.get_list_risk()):1==s&&t.$message.error(l)}).catch(function(t){console.log(t)})},prev_task_handle_save:function(){var t=this;if(0==this.task_params.multiple.length){var a=this.table.multipleSelection.map(function(t){return 1*t.id});this.task_params.multiple=a}console.log(this.task_params.multiple),this.handle.save=!0,this.$axios.post("/yiiapi/asset/add-workorder",{name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,risk_asset:this.task_params.multiple,remind:this.task_params.notice,type:"asset"}).then(function(a){t.handle.save=!1;var e=a.data,s=e.status,l=e.msg;e.data;0==s?(t.$message.success("保存成功"),t.closed_task_new(),t.get_list_risk()):1==s&&t.$message.error(l)}).catch(function(t){console.log(t)})},open_add_new:function(){this.add_open_state()},add_open_state:function(){var t=this.table.multipleSelection,a=t.map(function(t){return t.status});if(0==t.length)return this.$message({message:"请选择需要加入工单的资产！",type:"warning"}),!1;a.includes("3")||a.includes("4")||a.includes("5")?this.$message({message:"资产状态为已处置、已忽略、误报的不能添加到工单。",type:"warning"}):(this.add_state_change=!0,this.get_table_works_list())},get_table_works_list:function(){var t=this;this.$axios.get("/yiiapi/asset/workorder-list",{params:{page:this.table_add_works.pageNow,rows:this.table_add_works.eachPage,type:"asset"}}).then(function(a){t.table_add_works.loading=!1;var e=a.data,s=e.status,l=e.data;if(0==s){var i=l.data,n=l.count,o=l.maxPage,r=l.pageNow;i.map(function(t,a){t.new_perator=JSON.parse(t.perator).join(","),t.checked=!1}),t.table_add_works.tableData=i,t.table_add_works.count=n,t.table_add_works.maxPage=o,t.table_add_works.pageNow=Number(r)}})},add_closed_state:function(){this.add_state_change=!1,this.add_params={name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",multiple:[],old_as:[],remind:["email"]},this.$refs.multipleTable.clearSelection()},handle_sel_table_add_works:function(t){this.table_add_works.multipleSelection=t},add_ok_state:function(){var t=this,a=this.table.multipleSelection.map(function(t){return 1*t.id});this.add_params.multiple=a;var e=this.table_add_works.multipleSelection;if(0==e.length)this.$message({message:"请选择需要添加的工单！",type:"warning"});else if(e.length>1)this.$message({message:"资产/告警不能添加到多个工单，请重新选择！",type:"warning"});else{console.log("******************"),this.add_params.id=e[0].id,this.add_params.name=e[0].name,this.add_params.level=e[0].priority,this.add_params.perator=JSON.parse(e[0].perator),this.add_params.remarks=e[0].remarks,this.add_params.remind=JSON.parse(e[0].remind),this.add_params.old_as=JSON.parse(e[0].risk_asset),this.add_params.multiple=[].concat(n()(this.add_params.multiple),n()(this.add_params.old_as)),console.log(this.add_params.multiple),this.add_params.multiple=[].concat(n()(new l.a(this.add_params.multiple)));var s=this.add_params.multiple.filter(function(t){return t});this.add_params.multiple=s,console.log(this.add_params.perator),this.handle.save=!0,this.$axios.post("/yiiapi/asset/add-workorder",{id:this.add_params.id,name:this.add_params.name,priority:this.add_params.level,perator:this.add_params.perator,remind:this.add_params.remind,remarks:this.add_params.remarks,risk_asset:this.add_params.multiple,type:"asset"}).then(function(a){t.handle.save=!1;var e=a.data,s=e.status,l=e.msg;e.data;0==s?(t.$message.success("添加成功"),t.add_closed_state(),t.get_list_risk()):1==s&&t.$message.error(l)}).catch(function(t){console.log(t)})}},sc_table_add_works:function(t){this.table_add_works.eachPage=t,this.table_add_works.pageNow=1,this.get_table_works_list()},hcc_table_add_works:function(t){this.table_add_works.pageNow=t,this.get_table_works_list()}}},v={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.handle.save,expression:"handle.save",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"handle-assets"},[t.data_top_show?s("vm-handle-tabs",{attrs:{data_top:t.data_top}}):t._e(),t._v(" "),s("div",{staticClass:"assets_all"},[s("el-row",{staticClass:"assets_all_list"},[s("h3",{staticClass:"title"},[t._v("全部资产")]),t._v(" "),s("div",{staticClass:"all_list"},t._l(t.assets_all.tags,function(a,e){return s("el-tag",{key:e,attrs:{closable:"",size:"small",type:"",effect:"plain"},on:{close:function(e){return t.deleteAllAssets(a)}}},[t._v("\n          "+t._s(a.name)+"\n        ")])}),1),t._v(" "),s("div",{staticClass:"tog"},[s("el-button",{staticClass:"assets-toggle",on:{click:function(a){t.toggle_top_show=!t.toggle_top_show}}},[s("span",{staticClass:"name"},[t._v("收起更多")]),t._v(" "),s("i",{staticClass:"icons",class:{top_down:!t.toggle_top_show}})])],1)]),t._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:t.toggle_top_show,expression:"toggle_top_show"}],staticClass:"assets_all_detail"},[s("ul",{staticClass:"all_detail"},t._l(t.assets_all.base,function(a,e){return s("li",{key:e,staticClass:"all_detail_item"},[s("h4",{staticClass:"title"},[t._v(t._s(a.name)+"：")]),t._v(" "),s("div",{staticClass:"detail_list"},t._l(a.value,function(a,l){return s("el-button",{key:l,staticClass:"d_btn",class:{d_btn_active:a.flag},attrs:{title:a.name,size:"small"},on:{click:function(s){return t.clickAllAssets(a.name,a.flag,e,l)}}},[t._v(t._s(a.name)+"\n            ")])}),1),t._v(" "),e==a.pid?s("div",{directives:[{name:"show",rawName:"v-show",value:t.assets_all.base[e].souce_value.length>15,expression:"assets_all.base[$index].souce_value.length > 15"}],staticClass:"detail-toggle",on:{click:function(s){return t.toggle_types(e,a.toggle_show)}}},[s("label",{staticClass:"tog-types"},[s("span",{staticClass:"name"},[t._v("更多")]),t._v(" "),s("i",{staticClass:"icons",class:{checked:a.toggle_show}})])]):t._e()])}),0)])],1),t._v(" "),s("div",{staticClass:"assets_risk"},[s("el-form",{staticClass:"common-pattern"},[s("h3",{staticClass:"title"},[t._v("风险资产")]),t._v(" "),s("el-row",{staticClass:"common_box",staticStyle:{padding:"15px 0"}},[s("el-col",{staticClass:"common_box_list",attrs:{span:24}},[s("el-input",{staticClass:"s_key",attrs:{placeholder:"搜索关键词",clearable:""},model:{value:t.params.key,callback:function(a){t.$set(t.params,"key",a)},expression:"params.key"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),s("el-select",{staticClass:"s_key",attrs:{clearable:"",placeholder:"失陷确定性"},model:{value:t.params.threat,callback:function(a){t.$set(t.params,"threat",a)},expression:"params.threat"}},t._l(t.options_threat,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-select",{staticClass:"s_key",attrs:{clearable:"",placeholder:"威胁等级",width:"100"},model:{value:t.params.degree,callback:function(a){t.$set(t.params,"degree",a)},expression:"params.degree"}},t._l(t.options_degree,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-select",{staticClass:"s_key",attrs:{clearable:"",placeholder:"处理状态"},model:{value:t.params.status,callback:function(a){t.$set(t.params,"status",a)},expression:"params.status"}},t._l(t.options_status,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-button",{staticClass:"s_btn",on:{click:function(a){return t.submitClick()}}},[t._v("搜索")]),t._v(" "),s("el-link",{staticClass:"s_link",on:{click:function(a){return t.resetClick()}}},[t._v("重置")])],1)],1),t._v(" "),s("el-row",{staticClass:"common_btn"},[s("el-col",{staticClass:"common_btn_list",attrs:{span:24}},[s("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start",size:"148"},on:{command:t.change_state}},[s("el-button",{staticClass:"change_btn",attrs:{type:"primary"}},[s("span",[t._v("状态变更")]),t._v(" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticClass:"dropdown_ul_box",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"处置中"}},[t._v("处置中")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"已处置"}},[t._v("已处置")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"已忽略"}},[t._v("已忽略")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"误报"}},[t._v("误报")])],1)],1),t._v(" "),s("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.change_task}},[s("el-button",{staticClass:"change_btn",attrs:{type:"primary"}},[s("span",[t._v("工单任务")]),t._v(" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticClass:"dropdown_ul_box",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"新建工单"}},[t._v("新建工单")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"添加到工单"}},[t._v("添加到工单")])],1)],1)],1)],1)],1),t._v(" "),s("el-row",{staticClass:"common-table-pattern"},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"multipleTable",staticClass:"common-table",attrs:{"row-style":{cursor:"pointer"},data:t.table.tableData},on:{"row-click":t.detailClick,"selection-change":t.handleSelChange}},[s("el-table-column",{attrs:{label:"全选",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"asset_ip",label:"资产"}}),t._v(" "),s("el-table-column",{attrs:{prop:"label_group",label:"资产组","show-overflow-tooltip":"","min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{"min-width":"140",label:"关联威胁"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.category,function(a){return""!=a?s("span",{staticClass:"btn_tag_box"},[s("el-button",{staticClass:"btn_tag",attrs:{type:"primary"}},[t._v("\n                  "+t._s(a)+"\n                ")])],1):t._e()})}}])}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"high"==a.row.degree,mid_background:"medium"==a.row.degree,low_background:"low"==a.row.degree}},[t._v("\n                "+t._s(t._f("degree")(a.row.degree)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"失陷确定性","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{class:{fall_certainty:"1"==a.row.fall_certainty}},[t._v("\n                "+t._s(t._f("certainty")(a.row.fall_certainty)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("risk_status")(a.row.status)))]}}])})],1)],1),t._v(" "),s("el-col",{staticClass:"e-pagination",attrs:{span:24}},[s("el-pagination",{staticClass:"handle-pagination",attrs:{"page-sizes":[10,20,50,100],"page-size":t.table.eachPage,"current-page":t.table.pageNow,total:t.table.count,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),s("el-dialog",{staticClass:"pop_state_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.state_change},on:{"update:visible":function(a){t.state_change=a}}},[s("img",{staticClass:"closed_img",attrs:{src:e("6an9"),alt:""},on:{click:t.closed_state}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("状态变更")])]),t._v(" "),s("div",{staticClass:"content"},[s("p",{staticClass:"content_p",staticStyle:{"font-size":"0","text-align":"center"}},[s("span",{staticStyle:{"font-size":"14px"}},[t._v("是否将已勾选的")]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.table.multipleSelection.length))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("项状态变更为“")]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.process_state))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("”?")])])]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.cancel_state}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"ok_btn",on:{click:t.ok_state}},[t._v("确定")])],1)]),t._v(" "),s("el-dialog",{staticClass:"task_new_box pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.task.new},on:{"update:visible":function(a){return t.$set(t.task,"new",a)}}},[s("img",{staticClass:"closed_img",attrs:{src:e("6an9"),alt:""},on:{click:t.closed_task_new}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("编辑工单")])]),t._v(" "),s("div",{staticClass:"step_box"},[s("div",{staticClass:"step_box1"},[s("span",{staticClass:"step1_span",class:t.task.new_contet?"step_now":"step_past"},[t._v("基本信息")]),t._v(" "),s("img",{staticClass:"selected_img",attrs:{src:e("4CQt"),alt:""}})]),t._v(" "),s("div",{staticClass:"step_box2"},[s("span",{staticClass:"step2_span",class:t.task.new_contet?"step_past":"step_now"},[t._v("处置内容")])])]),t._v(" "),t.task.new_contet?s("div",{staticClass:"task_new_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"content_top"},[s("div",{staticClass:"content_top_left"},[s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("工单名称")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-input",{staticClass:"task_new_input",attrs:{placeholder:"请输入工单名称","show-word-limit":"",maxlength:"32",clearable:""},model:{value:t.task_params.name,callback:function(a){t.$set(t.task_params,"name",a)},expression:"task_params.name"}})],1),t._v(" "),s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("经办人")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择经办人"},model:{value:t.task_params.operator,callback:function(a){t.$set(t.task_params,"operator",a)},expression:"task_params.operator"}},t._l(t.task_new.operator_list,function(a){return s("el-option",{key:a.id,attrs:{label:a.username,value:a.username},nativeOn:{click:function(e){return t.select_changced(a)}}})}),1)],1)]),t._v(" "),s("div",{staticClass:"content_top_right"},[s("li",{staticClass:"right_item"},[s("div",{staticClass:"title"},[s("span",[t._v("优先级")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择优先级"},model:{value:t.task_params.level,callback:function(a){t.$set(t.task_params,"level",a)},expression:"task_params.level"}},t._l(t.task_new.level_list,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("li",{staticClass:"right_item"},[s("el-checkbox-group",{model:{value:t.task_params.notice,callback:function(a){t.$set(t.task_params,"notice",a)},expression:"task_params.notice"}},[s("el-checkbox",{attrs:{label:"email",value:"email"}},[t._v("邮件通知")]),t._v(" "),s("el-checkbox",{attrs:{label:"message",value:"message"}},[t._v("短信通知")])],1)],1)])]),t._v(" "),s("div",{staticClass:"content_remarks"},[s("p",{staticClass:"title"},[t._v("备注")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",maxlength:"500","show-word-limit":""},model:{value:t.task_params.textarea,callback:function(a){t.$set(t.task_params,"textarea",a)},expression:"task_params.textarea"}})],1),t._v(" "),s("div",{staticClass:"content_table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.table_operator.tableData}},[s("el-table-column",{attrs:{prop:"username",label:"经办人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"department",label:"部门"}}),t._v(" "),s("el-table-column",{attrs:{prop:"email_addr",label:"邮箱"}})],1)],1)]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_task_new}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"next_btn",on:{click:t.next_task_new}},[t._v("下一步")])],1)]):t._e(),t._v(" "),t.task.new_contet?t._e():s("div",{staticClass:"task_handle_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"table_box"},[s("ul",{staticClass:"table_box_title"},t._l(t.handle.table_title,function(a,e){return s("li",{class:{active:t.handle.active==e},on:{click:function(a){return t.table_btn_toggle(e)}}},[t._v("\n              "+t._s(a)+"\n            ")])}),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.handle.active,expression:"handle.active == 0"}]},[s("el-table",{staticClass:"common-table",staticStyle:{width:"100%"},attrs:{data:t.table_assets.tableData_new,"tooltip-effect":"dark"},on:{"selection-change":t.handle_sel_table_assets}},[s("el-table-column",{attrs:{label:"全选",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"asset_ip",label:"资产","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"label_group",label:"资产组",width:"90","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"关联威胁","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.category,function(a){return""!=a?s("span",{staticClass:"btn_tag_box"},[s("el-button",{staticClass:"btn_tag",attrs:{type:"primary"}},[t._v("\n                  "+t._s(a)+"\n                ")])],1):t._e()})}}],null,!1,4216593818)}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"high"==a.row.degree,mid_background:"medium"==a.row.degree,low_background:"low"==a.row.degree}},[t._v("\n                    "+t._s(t._f("degree")(a.row.degree)))])]}}],null,!1,2783555780)}),t._v(" "),s("el-table-column",{attrs:{label:"失陷确定性"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{class:{fall_certainty:"1"==a.row.fall_certainty}},[t._v("\n                    "+t._s(t._f("certainty")(a.row.fall_certainty)))])]}}],null,!1,2030827981)}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"60"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("risk_status")(a.row.status)))]}}],null,!1,3741355416)})],1),t._v(" "),s("el-pagination",{staticClass:"pagination_box",attrs:{"page-sizes":[10,20,50,100],"page-size":t.table_assets.eachPage,"current-page":t.table_assets.pageNow,total:t.table_assets.count,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.sc_table_assets,"current-change":t.hcc_table_assets}})],1)])]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_task_new}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle}},[t._v("上一步")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_assign}},[t._v("分配")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_save}},[t._v("保存")])],1)])]),t._v(" "),s("el-dialog",{staticClass:"pop_state_add pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.add_state_change},on:{"update:visible":function(a){t.add_state_change=a}}},[s("img",{staticClass:"closed_img",attrs:{src:e("6an9"),alt:""},on:{click:t.add_closed_state}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("添加到工单")])]),t._v(" "),s("div",{staticClass:"content"},[s("el-row",{staticClass:"common-table-pattern"},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table_add_works.loading,expression:"table_add_works.loading"}],staticClass:"common-table",attrs:{"highlight-current-row":"",data:t.table_add_works.tableData},on:{"selection-change":t.handle_sel_table_add_works}},[s("el-table-column",{attrs:{label:"选择",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"工单名称","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"creator",label:"创建人","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"优先级",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("priority")(a.row.priority)))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"new_perator",label:"经办人","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("work_status")(a.row.status)))]}}])})],1)],1),t._v(" "),s("el-col",{staticClass:"e-pagination",attrs:{span:24}},[s("el-pagination",{staticClass:"handle-pagination",attrs:{"page-sizes":[10,20,50,100],"page-size":t.table_add_works.eachPage,total:t.table_add_works.count,"current-page":t.table_add_works.pageNow,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.sc_table_add_works,"current-change":t.hcc_table_add_works}})],1)],1)],1),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.add_closed_state}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"ok_btn",on:{click:t.add_ok_state}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var b=e("VU/8")(h,v,!1,function(t){e("leqS")},"data-v-238aff57",null);a.default=b.exports},TmV0:function(t,a,e){e("fZOM"),t.exports=e("FeBl").Object.values},ZzBz:function(t,a){},fZOM:function(t,a,e){var s=e("kM2E"),l=e("mbce")(!1);s(s.S,"Object",{values:function(t){return l(t)}})},gRE1:function(t,a,e){t.exports={default:e("TmV0"),__esModule:!0}},leqS:function(t,a){},mbce:function(t,a,e){var s=e("+E39"),l=e("lktj"),i=e("TcQ7"),n=e("NpIQ").f;t.exports=function(t){return function(a){for(var e,o=i(a),r=l(o),_=r.length,c=0,d=[];_>c;)e=r[c++],s&&!n.call(o,e)||d.push(t?[e,o[e]]:o[e]);return d}}}});