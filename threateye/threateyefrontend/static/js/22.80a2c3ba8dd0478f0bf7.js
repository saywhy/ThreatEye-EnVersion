webpackJsonp([22],{"4fR/":function(t,e,a){"use strict";(function(t){var s=a("lHA8"),l=a.n(s),i=a("c/Tr"),o=a.n(i),n=a("Gu7T"),r=a.n(n),c=a("zQWo");e.a={name:"vm-handle-tabs",props:{owned:{type:String,default:"created"}},data:function(){return{options_priority:[{value:"highest",label:"最高"},{value:"high",label:"高"},{value:"medium",label:"中"},{value:"low",label:"低"}],options_status:[{value:"all",label:"所有"},{value:"0",label:"待分配"},{value:"1",label:"已分配"},{value:"2",label:"处置中"},{value:"3",label:"已处置"},{value:"4",label:"已取消"}],params:{key:"",priority:"",status:"",startTime:"",endTime:""},count:{count:0,highest:0,high:0,medium:0,low:0},table:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[],loading:!0},my_risk_asset:[],state_change:!1,process_state:"",task:{new:!1,new_contet:!0,status:"",id:0,title:"新增工单"},task_params:{name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",type:"asset"},task_new:{level_list:[{value:"highest",label:"最高"},{value:"high",label:"高"},{value:"medium",label:"中"},{value:"low",label:"低"}],operator_list:[]},table_operator:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:5},handle:{add:"",table_title:["资产","告警"],active:0,dist:!1,save:!1},table_assets:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[]},table_alerts:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[],multipleData:[]},edit:{pop:!1,task:{frist:!0,new_contet:!0},data:{},level_list:[{value:"highest",label:"最高"},{value:"high",label:"高"},{value:"medium",label:"中"},{value:"low",label:"低"}],perator:[],operator_list:[],notice:[],table_operator:[],handle_sel:[],asset_list:{},alert_list:{},page:1,rows:10}}},components:{VmEmergePicker:c.a},created:function(){"distributed"==this.owned?this.options_status=[{value:"all",label:"所有"},{value:"1",label:"已分配"},{value:"2",label:"处置中"},{value:"3",label:"已处置"},{value:"4",label:"已取消"}]:this.options_status=[{value:"all",label:"所有"},{value:"0",label:"待分配"},{value:"1",label:"已分配"},{value:"2",label:"处置中"},{value:"3",label:"已处置"},{value:"4",label:"已取消"}],"created"!=this.owned&&(this.params.status=""),this.get_list_works()},methods:{get_list_assets_info:function(){var t=this;this.$axios.get("/yiiapi/workorder/asset-list",{params:{page:this.table_assets.pageNow,rows:this.table_assets.eachPage}}).then(function(e){var a=e.data,s=a.status,l=a.data;if(0==s){var i=l.data,o=l.count,n=l.maxPage,r=l.pageNow;i.map(function(t,e){t.label=JSON.parse(t.label),t.label&&t.label.length?t.label_group=t.label.join(","):t.label_group=""});var c=t;console.log("^^^^"),console.log(t.table_assets.multipleSelection),i.forEach(function(e){t.table_assets.multipleSelection.forEach(function(t){e.asset_ip==t.asset_ip&&c.$nextTick(function(){c.$refs.assetTableName.toggleRowSelection(t,!0)})})}),t.table_assets.tableData=i,t.table_assets.count=o,t.table_alerts.maxPage=n,t.table_alerts.pageNow=r}})},get_list_alerts_info:function(){var t=this;this.$axios.get("/yiiapi/workorder/alert-list",{params:{page:this.table_alerts.pageNow,rows:this.table_alerts.eachPage}}).then(function(e){var a=e.data,s=a.status,l=a.data;if(0==s){var i=l.data,o=l.count,n=l.maxPage,r=l.pageNow;console.log(i);var c=t;console.log(t.task_params.multiple_alerts),i.forEach(function(e){t.table_alerts.multipleSelection.forEach(function(t){e.id==t.id&&c.$nextTick(function(){c.$refs.alertTableName.toggleRowSelection(t,!0)})})}),t.table_alerts.tableData=i,t.table_alerts.count=o,t.table_alerts.maxPage=n,t.table_alerts.pageNow=r}})},get_list_works:function(){var t=this;this.table.loading=!0,console.log("************");var e="";e="created"==this.owned?""==this.params.status?"default":"all"==this.params.status?"":this.params.status:""==this.params.status?"":"all"==this.params.status?"":this.params.status,this.$axios.get("/yiiapi/workorder/list",{params:{stime:this.params.startTime,etime:this.params.endTime,status:e,priority:this.params.priority,key_word:this.params.key,owned:this.owned,page:this.table.pageNow,rows:this.table.eachPage}}).then(function(e){t.table.loading=!1;var a=e.data,s=a.status,l=a.data;if(0==s){var i=l.data,o=l.count,n=l.maxPage,r=l.pageNow;t.count=o,i.map(function(t,e){t.perator&&(t.new_perator=t.perator.join(","))}),t.table.tableData=i,t.table.count=Number(o.count),t.table.maxPage=n,t.table.pageNow=r}})},changeTime:function(t){t?(this.params.startTime=(t[0].valueOf()/1e3).toFixed(0),this.params.endTime=(t[1].valueOf()/1e3).toFixed(0)):(this.params.startTime="",this.params.endTime="")},submitClick:function(){this.get_list_works()},resetClick:function(){this.params={key:"",priority:"",status:"",startTime:"",endTime:""},t(document.querySelector(".el-button--text")).trigger("click"),this.get_list_works()},handleSizeChange:function(t){this.table.eachPage=t,this.table.pageNow=1,this.get_list_works()},handleCurrentChange:function(t){this.table.pageNow=t,this.get_list_works()},handleSelChange:function(t){this.table.multipleSelection=t},detail_click:function(t){this.$router.push({path:"/detail/works",query:{id:t.id,type:"workorder"}})},change_state:function(t){this.process_state=t,this.open_state()},open_state:function(){if(0==this.table.multipleSelection.length)return this.$message({message:"请选择需要变更的工单",type:"warning"}),!1;this.state_change=!0},closed_state:function(){this.state_change=!1,this.$refs.multipleTable.clearSelection()},cancel_state:function(){this.closed_state()},ok_state:function(){var t=this,e=this.table.multipleSelection.map(function(t){return t.id}),a=this.process_state,s=0;"处置中"==a?s=2:"已处置"==a?s=3:"已取消"==a&&(s=4),this.$axios.put("/yiiapi/workorder/change-status",{id:e,status:s}).then(function(e){var a=e.data,s=a.status;a.data;0==s?(t.$message.success("工单状态变更成功！"),t.get_list_works(),t.closed_state(),t.$emit("updateNum")):(t.$message.error("工单状态变更失败！"),t.closed_state())}).catch(function(t){console.log(t)})},worksdownload:function(){var t=this,e=this.table.multipleSelection;if(0==e.length)this.$message({type:"warning",message:"请选择需要下载的工单！"});else if(e.length>1)this.$message({type:"warning",message:"每次只能选择一个工单下载！"});else{var a=e[0].status;if(1==a||2==a){var s="/yiiapi/site/download-test?id="+1*e[0].id;this.$axios.get(s).then(function(a){var s=a.data,l=s.status,i=s.msg;s.data;if(console.log(a),0==l){var o="/yiiapi/workorder/download?id="+1*e[0].id;window.location.href=o}else t.$message({type:"warning",message:i})})}else this.$message({message:"当前状态下不允许下载工单！",type:"warning"})}},worksDelete:function(){var t=this,e=this,a=this.table.multipleSelection.map(function(t){return 1*t.id});0==a.length?e.$message({message:"请选择需要删除的工单！",type:"warning"}):this.$confirm("是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(a),e.$axios.delete("/yiiapi/workorder/del",{data:{id:a}}).then(function(t){var a=t.data,s=a.status,l=a.msg;a.data;0==s?(e.$message.success("删除工单成功"),e.get_list_works(),e.$emit("updateNum")):(""==l||void 0==l?e.$message.error("删除工单失败"):e.$message.error(l),e.$refs.multipleTable.clearSelection())}).catch(function(t){console.log(t)})}).catch(function(){t.$refs.multipleTable.clearSelection()})},open_task_new:function(){this.task_params={name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",type:"asset"},this.table_operator.tableData=[],this.open_task()},open_task:function(){var t=this;this.$axios.get("/yiiapi/site/user-list").then(function(e){var a=e.data,s=a.status,l=a.data;t.task_new.operator_list=0==s?l:[],t.task.new=!0,t.task.new_contet=!0}).catch(function(t){console.log("用户列表错误"),console.log(t)})},closed_task_new:function(){this.task.new=!1,this.task.new_contet=!1,this.task.status="",this.task_params={name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",type:"asset"},this.table_operator.tableData=[],this.$refs.multipleTable.clearSelection()},next_task_new:function(){""==this.task_params.name?this.$message.error("工单名称不能为空"):""==this.task_params.level?this.$message.error("优先级未选择"):0==this.table_operator.tableData.length?this.$message.error("经办人未选择"):(this.task.new_contet=!1,this.handle.active=0,console.log("下一步"),this.get_list_assets_info(),this.get_list_alerts_info())},prev_task_handle:function(){this.task.new_contet=!0},select_changced:function(t){this.table_operator.tableData.map(function(t){return t.id}).includes(t.id)?this.$message.error("已存在"):this.table_operator.tableData.unshift(t);var e=this.table_operator.tableData.map(function(t){return t.username});this.task_params.new_operator=e},sc_table_assets:function(t){},hcc_table_assets:function(t){this.table_assets.pageNow=t,this.get_list_assets_info()},sc_table_alerts:function(t){},hcc_table_alerts:function(t){this.table_alerts.pageNow=t,this.get_list_alerts_info()},getRowKeys_assets:function(t){return t.asset_ip},getRowKeys_alerts:function(t){return t.id},handle_sel_table_assets:function(t){this.table_assets.multipleSelection=t},handle_sel_table_alerts:function(t){this.table_alerts.multipleSelection=t},table_btn_toggle:function(t){this.handle.active=t,0==t?this.task_params.type="asset":1==t&&(this.task_params.type="alert")},prev_task_handle_assign:function(){var t=this.table_assets.multipleSelection.map(function(t){return 1*t.id}),e=this.table_alerts.multipleSelection.map(function(t){return 1*t.id});if("asset"==this.task_params.type)if(0==t.length)this.$message({message:"至少选择一条资产/告警！",type:"warning"});else{e=[];var a={name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,type:this.task_params.type,te_alert:e,risk_asset:t,remind:this.task_params.notice};this.get_distribution(a)}else if("alert"==this.task_params.type)if(0==e.length)this.$message({message:"至少选择一条资产/告警！",type:"warning"});else{t=[];var s={name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,type:this.task_params.type,te_alert:e,risk_asset:t,remind:this.task_params.notice};this.get_distribution(s)}},get_distribution:function(t){var e=this;this.handle.save=!0,this.$axios.put("/yiiapi/workorder/distribution",t).then(function(t){e.handle.save=!1;var a=t.data,s=a.status,l=a.msg;a.data;0==s?(e.$message.success("分配成功"),e.closed_task_new(),e.get_list_works(),e.$emit("updateNum")):1==s&&e.$message.error(l)}).catch(function(t){console.log(t)})},prev_task_handle_save:function(){var t=this.table_assets.multipleSelection.map(function(t){return 1*t.id}),e=this.table_alerts.multipleSelection.map(function(t){return 1*t.id});if("asset"==this.task_params.type)if(0==t.length)this.$message({message:"至少选择一条资产/告警！",type:"warning"});else{e=[];var a={name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,type:this.task_params.type,te_alert:e,risk_asset:t,remind:this.task_params.notice};this.get_save(a)}else if("alert"==this.task_params.type)if(0==e.length)this.$message({message:"至少选择一条资产/告警！",type:"warning"});else{t=[];var s={name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,type:this.task_params.type,te_alert:e,risk_asset:t,remind:this.task_params.notice};this.get_save(s)}},get_save:function(t){var e=this;this.handle.save=!0,this.$axios.post("/yiiapi/workorder/add",t).then(function(t){e.handle.save=!1;var a=t.data,s=a.status,l=a.msg;a.data;0==s?(e.$message.success("保存成功"),e.closed_task_new(),e.get_list_works(),e.$emit("updateNum")):1==s&&e.$message.error(l)}).catch(function(t){console.log(t)})},open_task_edit:function(){var t=this;this.$axios.get("/yiiapi/site/user-list").then(function(e){var a=e.data,s=a.status,l=a.data;0==s&&(console.log(t.edit),t.edit.operator_list=l,t.edit.data.perator&&0!=t.edit.data.perator.length?t.edit.operator_list.forEach(function(e){t.edit.data.perator.forEach(function(a){e.username==a&&t.edit.table_operator.push(e)})}):t.edit.table_operator=[],console.log(t.edit.operator_list),t.edit.pop=!0,t.edit.task.frist=!0)}).catch(function(t){console.log("用户列表错误"),console.log(t)})},closed_edit_pop:function(){this.edit.pop=!1},edit_task_pop:function(t){var e=this;this.edit.data={},this.edit.notice=[],this.edit.perator=[],this.edit.table_operator=[],this.edit.operator_list=[],this.edit.handle_sel=[],this.edit.asset_list=[],this.edit.alert_list=[],this.edit.page=1,this.edit.rows=10;var a=this.table.multipleSelection;return 1!=a.length?(this.$message({message:"请选择一项需要编辑的工单！",type:"warning"}),!1):"0"!=a[0].status?(this.$message({message:"工单状态只有‘待分配’可以被编辑！",type:"warning"}),!1):(this.edit.data=a[0],this.edit.notice=JSON.parse(this.edit.data.remind),console.log(this.edit.data),this.$axios.get("/yiiapi/workorder/get-exists",{params:{id:this.edit.data.id}}).then(function(t){var a=t.data,s=(a.status,a.data);console.log(s),e.edit.data.risk_asset_cn=[],s.risk_asset&&0!=s.risk_asset.length?(e.edit.data.risk_asset_cn=s.risk_asset,e.edit.data.risk_asset_cn.forEach(function(t){var a={id:t};e.edit.handle_sel.push(a)})):e.edit.data.risk_asset_cn=[],e.edit.data.risk_alert_cn=[],s.te_alert&&0!=s.te_alert.length?s.te_alert.forEach(function(t){""!=t&&e.edit.data.risk_alert_cn.push(t+""),e.edit.data.risk_alert_cn.forEach(function(t){var a={id:t};e.edit.handle_sel.push(a)})}):e.edit.data.risk_alert_cn=[]}).catch(function(t){console.log(t)}),void this.open_task_edit())},select_changced_edit:function(t){console.log(t),this.edit.table_operator.map(function(t){return t.id}).includes(t.id)?this.$message.error("已存在"):this.edit.table_operator.unshift(t);var e=this.edit.table_operator.map(function(t){return t.username});console.log(e)},next_task_edit:function(){""==this.edit.data.name?this.$message.error("工单名称不能为空"):""==this.edit.data.level?this.$message.error("优先级未选择"):0==this.edit.table_operator.length?this.$message.error("经办人未选择"):(this.task.new_contet=!1,"asset"==this.edit.data.type?this.get_list_assets():"alert"==this.edit.data.type&&this.get_list_alert(),console.log(this.edit.data.risk_asset_cn),console.log(this.edit.data.risk_alert_cn),this.edit.task.frist=!1)},prev_task_handle_edit:function(){this.edit.task.frist=!0},get_list_assets:function(t){var e=this;this.$axios.get("/yiiapi/workorder/asset-list",{params:{page:this.edit.page,rows:this.edit.rows,id:this.edit.data.id}}).then(function(t){var a=t.data,s=(a.status,a.data);e.edit.asset_list=s,e.edit.asset_list.data.map(function(t,e){t.label=JSON.parse(t.label),t.label&&t.label.length?t.label_group=t.label.join(","):t.label_group=""}),e.edit.handle_sel.forEach(function(t){e.edit.asset_list.data.forEach(function(a,s){t.id==a.id&&e.$nextTick(function(){e.$refs.assetTable.toggleRowSelection(a,!0)})})})})},get_list_alert:function(){var t=this;this.$axios.get("/yiiapi/workorder/alert-list",{params:{page:this.edit.page,rows:this.edit.rows,id:this.edit.data.id}}).then(function(e){console.log(t.edit.data.risk_alert_cn);var a=e.data,s=(a.status,a.data);t.edit.alert_list=s,t.edit.handle_sel.forEach(function(e){t.edit.alert_list.data.forEach(function(a,s){e.id==a.id&&t.$nextTick(function(){t.$refs.alertTable.toggleRowSelection(a,!0)})})})})},getRowKeys:function(t){return t.id},handle_sel_assets:function(t){this.edit.handle_sel=t},handle_sel_alert:function(t){this.edit.handle_sel=t},removeByValue:function(t,e){for(var a=0;a<t.length;a++)if(t[a]==e){t.splice(a,1);break}return t},current_change_assets:function(t){this.edit.page=t},arr_repeat:function(t,e){return t.push.apply(t,r()(e)),o()(new l.a(t))},current_change_alert:function(t){this.edit.page=t,this.get_list_alert()},prev_task_handle_save_edit:function(){var t=this;console.log(this.edit.handle_sel),this.edit.table_operator.forEach(function(e){t.edit.perator.push(e.username)});var e=[];this.edit.handle_sel.forEach(function(t){e.push(t.id)});var a={workorder_edit:"1",id:this.edit.data.id,name:this.edit.data.name,priority:this.edit.data.priority,perator:this.edit.perator,remarks:this.edit.data.remarks,type:this.edit.data.type,remind:this.edit.notice};"asset"==this.edit.data.type?a.risk_asset=e:a.te_alert=e,console.log(a),this.handle.save=!0,this.$axios.post("/yiiapi/workorder/add",a).then(function(e){t.handle.save=!1;var a=e.data;a.status,a.msg,a.data;console.log(e),0==e.data.status?(t.$message.success("修改成功"),t.get_list_works(),t.edit.pop=!1):t.$message.error(e.data.msg)}).catch(function(t){console.log(t)})},prev_task_handle_assign_edit:function(){var t=this;this.edit.table_operator.forEach(function(e){t.edit.perator.push(e.username)});var e=[];this.edit.handle_sel.forEach(function(t){e.push(t.id)});var a={workorder_edit:"1",id:this.edit.data.id,name:this.edit.data.name,priority:this.edit.data.priority,perator:this.edit.perator,remarks:this.edit.data.remarks,type:this.edit.data.type,remind:this.edit.notice};"asset"==this.edit.data.type?a.risk_asset=e:a.te_alert=e,console.log(a),this.handle.save=!0,this.$axios.put("/yiiapi/workorder/distribution",a).then(function(e){t.handle.save=!1;var a=e.data;a.status,a.msg,a.data;console.log(e),0==e.data.status?(t.$message.success("修改成功"),t.get_list_works(),t.edit.pop=!1):t.$message.error(e.data.msg)}).catch(function(t){console.log(t)})}}}}).call(e,a("7t+N"))},"6Un4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("4fR/"),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.handle.save,expression:"handle.save",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"vm-handle-works"},[s("div",{staticClass:"invest_form invest_form_network"},[s("el-form",{staticClass:"common-pattern"},[s("el-row",{staticClass:"common_box"},[s("el-col",{staticClass:"common_box_list",attrs:{span:24}},[s("el-input",{staticClass:"s_key",attrs:{placeholder:"搜索关键词",clearable:""},model:{value:t.params.key,callback:function(e){t.$set(t.params,"key",e)},expression:"params.key"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),s("vm-emerge-picker",{on:{changeTime:t.changeTime}}),t._v(" "),s("el-select",{staticClass:"s_key s_key_types",attrs:{clearable:"",placeholder:"优先级"},model:{value:t.params.priority,callback:function(e){t.$set(t.params,"priority",e)},expression:"params.priority"}},t._l(t.options_priority,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-select",{staticClass:"s_key",attrs:{clearable:"",placeholder:"处理状态"},model:{value:t.params.status,callback:function(e){t.$set(t.params,"status",e)},expression:"params.status"}},t._l(t.options_status,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-button",{staticClass:"s_btn",on:{click:function(e){return t.submitClick()}}},[t._v("搜索")]),t._v(" "),s("el-link",{staticClass:"s_link",on:{click:function(e){return t.resetClick()}}},[t._v("重置")])],1)],1),t._v(" "),s("el-row",{staticClass:"common_priority",staticStyle:{"text-align":"left"}},[s("el-col",{staticClass:"common_btn_priority",attrs:{span:24}},[s("p",{staticClass:"item_list"},[s("span",{staticClass:"item"},[t._v("共计\n              "),s("span",{staticClass:"num"},[t._v(t._s(t.count.count))]),t._v(" 条")]),t._v(" "),s("span",{staticClass:"item"},[t._v("其中优先级")]),t._v(" "),s("el-tag",{staticClass:"e_tag e-tag-1"},[t._v("最高：\n              "),s("span",{staticClass:"nums"},[t._v(t._s(t.count.highest))])]),t._v(" "),s("el-tag",{staticClass:"e_tag e-tag-2"},[t._v("高：\n              "),s("span",{staticClass:"nums"},[t._v(t._s(t.count.high))])]),t._v(" "),s("el-tag",{staticClass:"e_tag e-tag-3"},[t._v("中：\n              "),s("span",{staticClass:"nums"},[t._v(t._s(t.count.medium))])]),t._v(" "),s("el-tag",{staticClass:"e_tag e-tag-4"},[t._v("低：\n              "),s("span",{staticClass:"nums"},[t._v(t._s(t.count.low))])])],1)])],1),t._v(" "),s("el-row",{staticClass:"common_btn"},[s("el-col",{staticClass:"common_btn_list",attrs:{span:24}},[s("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{command:t.change_state}},[s("el-button",{staticClass:"change_btn",attrs:{type:"primary"}},[s("span",[t._v("状态变更")]),t._v(" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticClass:"dropdown_ul_box",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"处置中"}},[t._v("处置中")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"已处置"}},[t._v("已处置")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"已取消"}},[t._v("已取消")])],1)],1),t._v(" "),s("el-button",{staticClass:"bw_btn bw_btn_add",attrs:{type:"primary"},on:{click:function(e){return t.open_task_new()}}},[s("span",[t._v("新增")])]),t._v(" "),s("el-button",{staticClass:"bw_btn bw_btn_edit",attrs:{type:"primary"},on:{click:function(e){return t.edit_task_pop()}}},[s("span",[t._v("编辑")])]),t._v(" "),s("el-button",{staticClass:"bw_btn bw_btn_download",attrs:{type:"primary"},on:{click:function(e){return t.worksdownload()}}},[s("span",[t._v("下载")])]),t._v(" "),s("el-button",{staticClass:"bw_btn bw_btn_remove",attrs:{type:"primary"},on:{click:function(e){return t.worksDelete()}}},[s("span",[t._v("删除")])])],1)],1)],1)],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"multipleTable",staticClass:"common-table",attrs:{data:t.table.tableData,"row-style":{cursor:"pointer"},"tooltip-effect":"dark"},on:{"selection-change":t.handleSelChange,"row-click":t.detail_click}},[s("el-table-column",{attrs:{label:"全选",prop:"type",width:"50"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.row.if_new,expression:"scope.row.if_new == '1'"}],staticClass:"new_dot"})]}}])}),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"工单名称","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"creator",label:"创建人",width:"100","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("time")(e.row.created_at)))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"优先级"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("priority")(e.row.priority)))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"new_perator",label:"经办人","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"更新时间",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("time")(e.row.updated_at)))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"remarks",label:"备注","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("work_status")(e.row.status)))]}}])})],1),t._v(" "),s("el-pagination",{staticClass:"handle-pagination",attrs:{"page-sizes":[10,20,50,100],"page-size":t.table.eachPage,"current-page":t.table.pageNow,total:t.table.count,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),s("el-dialog",{staticClass:"pop_state_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.state_change},on:{"update:visible":function(e){t.state_change=e}}},[s("img",{staticClass:"closed_img",attrs:{src:a("6an9"),alt:""},on:{click:t.closed_state}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("状态变更")])]),t._v(" "),s("div",{staticClass:"content"},[s("p",{staticClass:"content_p",staticStyle:{"font-size":"0"}},[s("span",{staticStyle:{"font-size":"14px"}},[t._v("是否将已勾选的")]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.table.multipleSelection.length))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("项工单状态变更为“")]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.process_state))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("”?")])])]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.cancel_state}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"ok_btn",on:{click:t.ok_state}},[t._v("确定")])],1)]),t._v(" "),s("el-dialog",{staticClass:"task_new_box pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.task.new},on:{"update:visible":function(e){return t.$set(t.task,"new",e)}}},[s("img",{staticClass:"closed_img",attrs:{src:a("6an9"),alt:""},on:{click:t.closed_task_new}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("编辑工单")])]),t._v(" "),s("div",{staticClass:"step_box"},[s("div",{staticClass:"step_box1"},[s("span",{staticClass:"step1_span",class:t.task.new_contet?"step_now":"step_past"},[t._v("基本信息")]),t._v(" "),s("img",{staticClass:"selected_img",attrs:{src:a("4CQt"),alt:""}})]),t._v(" "),s("div",{staticClass:"step_box2"},[s("span",{staticClass:"step2_span",class:t.task.new_contet?"step_past":"step_now"},[t._v("处置内容")])])]),t._v(" "),t.task.new_contet?s("div",{staticClass:"task_new_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"content_top"},[s("div",{staticClass:"content_top_left"},[s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("工单名称")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-input",{staticClass:"task_new_input",attrs:{placeholder:"请输入工单名称","show-word-limit":"",maxlength:"32",clearable:""},model:{value:t.task_params.name,callback:function(e){t.$set(t.task_params,"name",e)},expression:"task_params.name"}})],1),t._v(" "),s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("经办人")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择经办人"},model:{value:t.task_params.operator,callback:function(e){t.$set(t.task_params,"operator",e)},expression:"task_params.operator"}},t._l(t.task_new.operator_list,function(e){return s("el-option",{key:e.id,attrs:{label:e.username,value:e.username},nativeOn:{click:function(a){return t.select_changced(e)}}})}),1)],1)]),t._v(" "),s("div",{staticClass:"content_top_right"},[s("li",{staticClass:"right_item"},[s("div",{staticClass:"title"},[s("span",[t._v("优先级")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择优先级"},model:{value:t.task_params.level,callback:function(e){t.$set(t.task_params,"level",e)},expression:"task_params.level"}},t._l(t.task_new.level_list,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("li",{staticClass:"right_item"},[s("el-checkbox-group",{model:{value:t.task_params.notice,callback:function(e){t.$set(t.task_params,"notice",e)},expression:"task_params.notice"}},[s("el-checkbox",{attrs:{label:"email",value:"email"}},[t._v("邮件通知")]),t._v(" "),s("el-checkbox",{attrs:{label:"message",value:"message"}},[t._v("短信通知")])],1)],1)])]),t._v(" "),s("div",{staticClass:"content_remarks"},[s("p",{staticClass:"title"},[t._v("备注")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",maxlength:"500","show-word-limit":""},model:{value:t.task_params.textarea,callback:function(e){t.$set(t.task_params,"textarea",e)},expression:"task_params.textarea"}})],1),t._v(" "),s("div",{staticClass:"content_table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.table_operator.tableData}},[s("el-table-column",{attrs:{prop:"username",label:"经办人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"department",label:"部门"}}),t._v(" "),s("el-table-column",{attrs:{prop:"email_addr",label:"邮箱"}})],1)],1)]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_task_new}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"next_btn",on:{click:t.next_task_new}},[t._v("下一步")])],1)]):t._e(),t._v(" "),t.task.new_contet?t._e():s("div",{staticClass:"task_handle_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"table_box"},[s("ul",{staticClass:"table_box_title"},t._l(t.handle.table_title,function(e,a){return s("li",{class:{active:t.handle.active==a},on:{click:function(e){return t.table_btn_toggle(a)}}},[t._v("\n              "+t._s(e)+"\n            ")])}),0),t._v(" "),s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.handle.active,expression:"handle.active == 0"}]},[s("div",{staticClass:"tb_tolling"},[s("el-table",{ref:"assetTableName",staticClass:"common-table",staticStyle:{width:"100%"},attrs:{align:"center",data:t.table_assets.tableData,"tooltip-effect":"dark","row-key":t.getRowKeys_assets},on:{"selection-change":t.handle_sel_table_assets}},[s("el-table-column",{attrs:{label:"全选",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{align:"left",type:"selection",width:"50","reserve-selection":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"asset_ip",label:"资产",width:"180","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"label_group",label:"资产组","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"high"==e.row.degree,mid_background:"medium"==e.row.degree,low_background:"low"==e.row.degree}},[t._v("\n                        "+t._s(t._f("degree")(e.row.degree)))])]}}],null,!1,3880658116)}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("risk_status")(e.row.status)))]}}],null,!1,3741355416)})],1)],1),t._v(" "),s("el-pagination",{staticClass:"pagination_box",attrs:{"page-sizes":[10],"page-size":t.table_assets.eachPage,"current-page":t.table_assets.pageNow,total:t.table_assets.count,layout:"total, prev, pager, next"},on:{"current-change":t.hcc_table_assets}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.handle.active,expression:"handle.active == 1"}]},[s("div",{staticClass:"tb_tolling"},[s("el-table",{ref:"alertTableName",staticClass:"common-table",staticStyle:{width:"100%"},attrs:{align:"center",data:t.table_alerts.tableData,"tooltip-effect":"dark","row-key":t.getRowKeys_alerts},on:{"selection-change":t.handle_sel_table_alerts}},[s("el-table-column",{attrs:{label:"全选",prop:"type",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"50","reserve-selection":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"category",label:"告警类型","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"indicator",label:"威胁指标","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"application",label:"应用","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"高"==e.row.degree,mid_background:"中"==e.row.degree,low_background:"低"==e.row.degree}},[t._v("\n                        "+t._s(t._f("degree_sino")(e.row.degree)))])]}}],null,!1,3697759004)}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("alert_status")(e.row.status)))]}}],null,!1,1908041749)})],1)],1),t._v(" "),s("el-pagination",{staticClass:"pagination_box",attrs:{"page-sizes":[10],"page-size":t.table_alerts.eachPage,"current-page":t.table_alerts.pageNow,total:t.table_alerts.count,layout:"total, prev, pager, next"},on:{"current-change":t.hcc_table_alerts}})],1)])])]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_task_new}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle}},[t._v("上一步")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_assign}},[t._v("分配")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_save}},[t._v("保存")])],1)])]),t._v(" "),s("el-dialog",{staticClass:"task_new_box",attrs:{width:"840px","close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.edit.pop},on:{"update:visible":function(e){return t.$set(t.edit,"pop",e)}}},[s("img",{staticClass:"closed_img",attrs:{src:a("6an9"),alt:""},on:{click:t.closed_edit_pop}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("编辑工单")])]),t._v(" "),s("div",{staticClass:"step_box"},[s("div",{staticClass:"step_box1"},[s("span",{staticClass:"step1_span",class:t.edit.task.frist?"step_now":"step_past"},[t._v("基本信息")]),t._v(" "),s("img",{staticClass:"selected_img",attrs:{src:a("4CQt"),alt:""}})]),t._v(" "),s("div",{staticClass:"step_box2"},[s("span",{staticClass:"step2_span",class:t.edit.task.frist?"step_past":"step_now"},[t._v("处置内容")])])]),t._v(" "),t.edit.task.frist?s("div",{staticClass:"task_new_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"content_top"},[s("div",{staticClass:"content_top_left"},[s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("工单名称")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-input",{staticClass:"task_new_input",attrs:{placeholder:"请输入工单名称","show-word-limit":"",maxlength:"32",clearable:""},model:{value:t.edit.data.name,callback:function(e){t.$set(t.edit.data,"name",e)},expression:"edit.data.name"}})],1),t._v(" "),s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("经办人")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择经办人"},model:{value:t.task_params.operator,callback:function(e){t.$set(t.task_params,"operator",e)},expression:"task_params.operator"}},t._l(t.edit.operator_list,function(e){return s("el-option",{key:e.id,attrs:{label:e.username,value:e.username},nativeOn:{click:function(a){return t.select_changced_edit(e)}}})}),1)],1)]),t._v(" "),s("div",{staticClass:"content_top_right"},[s("li",{staticClass:"right_item"},[s("div",{staticClass:"title"},[s("span",[t._v("优先级")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择优先级"},model:{value:t.edit.data.priority,callback:function(e){t.$set(t.edit.data,"priority",e)},expression:"edit.data.priority"}},t._l(t.task_new.level_list,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("li",{staticClass:"right_item"},[s("el-checkbox-group",{model:{value:t.edit.notice,callback:function(e){t.$set(t.edit,"notice",e)},expression:"edit.notice"}},[s("el-checkbox",{attrs:{label:"email",value:"email"}},[t._v("邮件通知")]),t._v(" "),s("el-checkbox",{attrs:{label:"message",value:"message"}},[t._v("短信通知")])],1)],1)])]),t._v(" "),s("div",{staticClass:"content_remarks"},[s("p",{staticClass:"title"},[t._v("备注")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",maxlength:"500","show-word-limit":""},model:{value:t.edit.data.remarks,callback:function(e){t.$set(t.edit.data,"remarks",e)},expression:"edit.data.remarks"}})],1),t._v(" "),s("div",{staticClass:"content_table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.edit.table_operator}},[s("el-table-column",{attrs:{prop:"username",label:"经办人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"department",label:"部门"}}),t._v(" "),s("el-table-column",{attrs:{prop:"email_addr",label:"邮箱"}})],1)],1)]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_edit_pop}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"next_btn",on:{click:t.next_task_edit}},[t._v("下一步")])],1)]):t._e(),t._v(" "),t.edit.task.frist?t._e():s("div",{staticClass:"task_handle_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"table_box"},[s("ul",{staticClass:"table_box_title"},[s("li",{staticClass:"active"},["asset"==t.edit.data.type?s("span",[t._v("资产")]):t._e(),t._v(" "),"alert"==t.edit.data.type?s("span",[t._v("告警")]):t._e()])]),t._v(" "),s("div",["asset"==t.edit.data.type?s("div",[s("div",{staticClass:"tb_tolling"},[s("el-table",{ref:"assetTable",staticClass:"common-table",staticStyle:{width:"100%"},attrs:{align:"center",data:t.edit.asset_list.data,"tooltip-effect":"dark","row-key":t.getRowKeys},on:{"selection-change":t.handle_sel_assets}},[s("el-table-column",{attrs:{label:"全选",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{align:"left","reserve-selection":!0,type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"asset_ip",label:"资产"}}),t._v(" "),s("el-table-column",{attrs:{prop:"label_group",label:"资产组","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"high"==e.row.degree,mid_background:"medium"==e.row.degree,low_background:"low"==e.row.degree}},[t._v("\n                        "+t._s(t._f("degree")(e.row.degree)))])]}}],null,!1,3880658116)}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("risk_status")(e.row.status)))]}}],null,!1,3741355416)})],1)],1),t._v(" "),s("el-pagination",{staticClass:"pagination_box",attrs:{"page-sizes":[10],"page-size":10,"current-page":t.edit.asset_list.pageNow,total:t.edit.asset_list.count,layout:"total, prev, pager, next"},on:{"current-change":t.current_change_assets}})],1):t._e(),t._v(" "),"alert"==t.edit.data.type?s("div",[s("div",{staticClass:"tb_tolling"},[s("el-table",{ref:"alertTable",staticClass:"common-table",staticStyle:{width:"100%"},attrs:{align:"center",data:t.edit.alert_list.data,"tooltip-effect":"dark"},on:{"selection-change":t.handle_sel_alert}},[s("el-table-column",{attrs:{label:"全选",prop:"type",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"category",label:"告警类型","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"indicator",label:"威胁指标","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"src_ip",label:"源地址","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"dest_ip",label:"目的地址","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"application",label:"应用","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"高"==e.row.degree,mid_background:"中"==e.row.degree,low_background:"低"==e.row.degree}},[t._v("\n                        "+t._s(t._f("degree_sino")(e.row.degree)))])]}}],null,!1,3697759004)}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("alert_status")(e.row.status)))]}}],null,!1,1908041749)})],1)],1),t._v(" "),s("el-pagination",{staticClass:"pagination_box",attrs:{"page-sizes":[10],"page-size":10,"current-page":t.edit.alert_list.pageNow,total:t.edit.alert_list.count,layout:"total, prev, pager, next"},on:{"current-change":t.current_change_alert}})],1):t._e()])])]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_edit_pop}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_edit}},[t._v("上一步")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_assign_edit}},[t._v("分配")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_save_edit}},[t._v("保存")])],1)])])],1)},staticRenderFns:[]};var i=function(t){a("n9Vh")},o={name:"handle-works",data:function(){return{number:{created:0,distributed:0,all:0,role:"admin"},activeName:"first",owned:"created",childUpdate1:!0,childUpdate2:!1,childUpdate3:!1}},components:{VmHandleWorks:a("VU/8")(s.a,l,!1,i,"data-v-70eca7cb",null).exports},created:function(){this.init_tabs_info(),this.get_top_num()},destroyed:function(){"/detail/works"!=this.$route.path&&window.sessionStorage.removeItem("activeName")},methods:{init_tabs_info:function(){var t=window.sessionStorage.getItem("activeName");t?(this.activeName=t,"first"==t?(this.owned="created",this.childUpdate1=!0,this.childUpdate2=!1,this.childUpdate3=!1):"second"==t?(this.owned="distributed",this.childUpdate1=!1,this.childUpdate2=!0,this.childUpdate3=!1):"third"==t&&(this.owned="all",this.childUpdate1=!1,this.childUpdate2=!1,this.childUpdate3=!0)):(this.activeName="first",this.owned="created")},get_top_num:function(){var t=this;this.$axios.get("/yiiapi/workorder/top").then(function(e){var a=e.data,s=a.status,l=(a.msg,a.data);0==s&&l&&(null==l.created?t.number.created=0:t.number.created=l.created,null==l.distributed?t.number.distributed=0:t.number.distributed=l.distributed,null==l.all?t.number.all=0:t.number.all=l.all,t.number.role=l.role)})},updateTopNum:function(){this.get_top_num()},handleClick:function(t,e){var a=t.name,s=window.sessionStorage;"first"==a?(this.owned="created",this.childUpdate1=!0,this.childUpdate2=!1,this.childUpdate3=!1,s.setItem("activeName","first")):"second"==a?(this.owned="distributed",this.childUpdate1=!1,this.childUpdate2=!0,this.childUpdate3=!1,s.setItem("activeName","second")):"third"==a&&(this.owned="all",this.childUpdate1=!1,this.childUpdate2=!1,this.childUpdate3=!0,s.setItem("activeName","third"))}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"handle-works"},[a("div",{staticClass:"handle-works-top common-invest"},[a("div",{staticClass:"invest"},[a("sup",{staticClass:"h_count hc1"},[t._v(t._s(t.number.created))]),t._v(" "),a("sup",{staticClass:"h_count hc2"},[t._v(t._s(t.number.distributed))]),t._v(" "),a("sup",{directives:[{name:"show",rawName:"v-show",value:"admin"==t.number.role,expression:"number.role == 'admin'"}],staticClass:"h_count hc3"},[t._v(t._s(t.number.all))]),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我创建的",name:"first"}},[t.childUpdate1?a("vm-handle-works",{attrs:{owned:t.owned},on:{updateNum:t.updateTopNum}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"分配给我的",name:"second"}},[t.childUpdate2?a("vm-handle-works",{attrs:{owned:t.owned},on:{updateNum:t.updateTopNum}}):t._e()],1),t._v(" "),"admin"==t.number.role?a("el-tab-pane",{attrs:{label:"所有工单",name:"third"}},[t.childUpdate3?a("vm-handle-works",{attrs:{owned:t.owned},on:{updateNum:t.updateTopNum}}):t._e()],1):t._e()],1)],1)])])},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(t){a("RHbK")},"data-v-0452759d",null);e.default=r.exports},RHbK:function(t,e){},n9Vh:function(t,e){}});