webpackJsonp([13],{"/s1e":function(t,s){},"1ZHA":function(t,s){},Qrun:function(t,s){},R9GH:function(t,s){},ZzBS:function(t,s){},i4Ig:function(t,s){},iLqT:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={name:"mail-notic",data:function(){return{mail:{alertEmail_list:[{name:"",icon:!0}],content:"",ssl_switch:!1,host:"",info:"",password:"",port:"",send:!1,user:"",username:""}}},props:{option:{type:Object,default:function(){}}},mounted:function(){this.get_data()},methods:{get_data:function(){var t=this;this.$axios.get("/yiiapi/email/get").then(function(s){var e=s.data,a=(e.status,e.data);console.log(a),t.mail.port=a.port,t.mail.content=a.content,t.mail.host=a.host,t.mail.username=a.username,t.mail.send=a.send,"ssl"==a.encryption?t.ssl_switch=!0:t.ssl_switch=!1,t.mail.alertEmail_list=[],0==a.alertEmail.length?t.mail.alertEmail_list.push({name:"",icon:!0}):(a.alertEmail.forEach(function(s){var e={name:s,icon:!1};t.mail.alertEmail_list.push(e)}),t.mail.alertEmail_list[t.mail.alertEmail_list.length-1].icon=!0)}).catch(function(t){console.log(t)})},send_test:function(){var t=this,s="",e=[];return this.mail.alertEmail_list.forEach(function(t){""!=t.name&&e.push(t.name)}),0==e.length?(this.$message({message:"请输入收件箱地址",type:"warning"}),!1):""==this.mail.password?(this.$message({message:"请输入邮箱密码",type:"warning"}),!1):(s=this.mail.ssl_switch?"ssl":"",this.$axios.post("/yiiapi/email/test",{encryption:s,host:this.mail.host,port:this.mail.port,username:this.mail.username,password:this.mail.password,send:this.mail.send,content:this.mail.content,alertEmail:e}).then(function(s){var e=s.data,a=e.status,i=e.data;console.log(a),console.log(i),0==a?t.$message({message:"发送测试邮件通知成功",type:"success"}):t.$message({message:s.data.msg,type:"error"})}).catch(function(t){console.log(t)}),void console.log(this.mail))},send_save:function(){var t=this,s="",e=[];return console.log(this.mail.alertEmail_list),this.mail.alertEmail_list.forEach(function(t){""!=t.name&&e.push(t.name)}),0==e.length?(this.$message({message:"请输入收件箱地址",type:"warning"}),!1):""==this.mail.password?(this.$message({message:"请输入邮箱密码",type:"warning"}),!1):(s=this.mail.ssl_switch?"ssl":"",void this.$axios.post("/yiiapi/email/save",{encryption:s,host:this.mail.host,port:this.mail.port,username:this.mail.username,password:this.mail.password,send:this.mail.send,content:this.mail.content,alertEmail:e}).then(function(s){var e=s.data,a=e.status,i=e.data;console.log(a),console.log(i),0==a&&(t.get_data(),t.$message({message:"设置邮件通知成功",type:"success"}))}).catch(function(t){console.log(t)}))},add_addr:function(){this.mail.alertEmail_list.length<5?(this.mail.alertEmail_list.forEach(function(t){t.icon=!1}),this.mail.alertEmail_list.push({name:"",icon:!0})):this.$message.warning({message:"最多可以设置5个收件邮箱账号。",offset:50})},del_addr:function(t,s){this.mail.alertEmail_list.splice(s,1)}}},i={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"mail_notic"}},[a("div",{staticClass:"left"},[a("p",{staticClass:"title"},[t._v("邮件服务器设置")]),t._v(" "),a("div",{staticClass:"left_item"},[t._m(0),t._v(" "),a("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入SMTP服务器",clearable:""},model:{value:t.mail.host,callback:function(s){t.$set(t.mail,"host",s)},expression:"mail.host"}})],1),t._v(" "),a("div",{staticClass:"left_item"},[t._m(1),t._v(" "),a("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入SMTP端口",clearable:""},model:{value:t.mail.port,callback:function(s){t.$set(t.mail,"port",s)},expression:"mail.port"}})],1),t._v(" "),a("p",{staticClass:"title"},[t._v("\n      SMTP启用安全连接SSL启用\n      "),a("el-switch",{model:{value:t.mail.ssl_switch,callback:function(s){t.$set(t.mail,"ssl_switch",s)},expression:"mail.ssl_switch"}})],1),t._v(" "),a("div",{staticClass:"left_item"},[t._m(2),t._v(" "),a("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入邮箱地址",clearable:""},model:{value:t.mail.username,callback:function(s){t.$set(t.mail,"username",s)},expression:"mail.username"}})],1),t._v(" "),a("div",{staticClass:"left_item"},[t._m(3),t._v(" "),a("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入邮箱密码","show-password":""},model:{value:t.mail.password,callback:function(s){t.$set(t.mail,"password",s)},expression:"mail.password"}})],1),t._v(" "),a("div",{staticClass:"left_item"},[a("el-button",{staticClass:"save_btn",attrs:{type:"primary"},on:{click:t.send_save}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"test_btn",attrs:{type:"primary"},on:{click:t.send_test}},[t._v("发送测试邮件")])],1)]),t._v(" "),a("div",{staticClass:"mid"},[a("p",{staticClass:"title"},[t._v("收件邮箱账号")]),t._v(" "),a("div",{staticClass:"mid_item"},[t._m(4),t._v(" "),t._l(t.mail.alertEmail_list,function(s,i){return a("div",{staticClass:"item_addrs"},[a("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入邮箱地址，最多可以设置5个收件邮箱账号",clearable:""},model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"item.name"}}),t._v(" "),s.icon?a("img",{staticClass:"img_box",attrs:{src:e("uJWp"),alt:""},on:{click:t.add_addr}}):t._e(),t._v(" "),s.icon?t._e():a("img",{staticClass:"img_box",attrs:{src:e("ic23"),alt:""},on:{click:function(e){return t.del_addr(s,i)}}})],1)})],2),t._v(" "),a("div",{staticClass:"mid_item"},[a("p",[t._v("发送内容")]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-input",{staticClass:"select_box",attrs:{type:"textarea",rows:10,autosize:"",maxlength:"500","show-word-limit":"",resize:"none",placeholder:"请输入发送内容",clearable:""},model:{value:t.mail.content,callback:function(s){t.$set(t.mail,"content",s)},expression:"mail.content"}}),t._v(" "),a("span",{staticStyle:{width:"16px"}})],1)]),t._v(" "),a("p",{staticClass:"title"},[t._v("\n      发生警告时给此邮箱发送通知邮件\n      "),a("el-switch",{model:{value:t.mail.send,callback:function(s){t.$set(t.mail,"send",s)},expression:"mail.send"}})],1)]),t._v(" "),a("div",{staticClass:"right"})])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("SMTP服务器\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("SMTP端口\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("邮箱地址\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("邮箱密码\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("邮箱地址\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])}]};var l=e("VU/8")(a,i,!1,function(t){e("i4Ig"),e("ZzBS")},"data-v-7fe30764",null).exports,n={name:"mail-notic",data:function(){return{message:{type:"",id:"",key:"",name:"",model:""}}},props:{option:{type:Object,default:function(){}}},mounted:function(){},methods:{}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"short_message"}},[e("div",{staticClass:"left"},[e("div",{staticClass:"left_item"},[t._m(0),t._v(" "),e("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入短信平台 ",clearable:""},model:{value:t.message.type,callback:function(s){t.$set(t.message,"type",s)},expression:"message.type"}})],1),t._v(" "),e("div",{staticClass:"left_item"},[t._m(1),t._v(" "),e("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入AccessKey ID",clearable:""},model:{value:t.message.id,callback:function(s){t.$set(t.message,"id",s)},expression:"message.id"}})],1),t._v(" "),e("div",{staticClass:"left_item"},[t._m(2),t._v(" "),e("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入AccessKey Secret",clearable:""},model:{value:t.message.key,callback:function(s){t.$set(t.message,"key",s)},expression:"message.key"}})],1),t._v(" "),e("div",{staticClass:"left_item"},[e("p",[t._v("短信签名\n      ")]),t._v(" "),e("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入短信签名",clearable:""},model:{value:t.message.name,callback:function(s){t.$set(t.message,"name",s)},expression:"message.name"}})],1),t._v(" "),e("div",{staticClass:"left_item"},[e("p",[t._v("短信模板")]),t._v(" "),e("el-input",{staticClass:"select_box",attrs:{type:"textarea",rows:10,autosize:"",resize:"none",placeholder:"请输入短信模板",clearable:""},model:{value:t.message.model,callback:function(s){t.$set(t.message,"model",s)},expression:"message.model"}})],1),t._v(" "),e("div",{staticClass:"left_item btn_box"},[e("el-button",{staticClass:"save_btn",attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),e("el-button",{staticClass:"test_btn",attrs:{type:"primary"}},[t._v("发送测试短信")])],1)]),t._v(" "),e("div",{staticClass:"mid"}),t._v(" "),e("div",{staticClass:"right"})])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("短信平台\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("AccessKey ID\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("AccessKey Secret\n        "),s("span",{staticClass:"red_necessary"},[this._v("*")])])}]};var o={components:{mailNotic:l,shortMessage:e("VU/8")(n,c,!1,function(t){e("1ZHA"),e("R9GH")},"data-v-0a9e8fbc",null).exports},name:"system_control_electric",data:function(){return{activeName:"first"}},methods:{handleClick:function(t,s){console.log(t.label)}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container",attrs:{id:"system_control_threat"}},[e("div",{staticClass:"content_box"},[e("div",{staticClass:"network_tab"},[e("el-tabs",{staticClass:"reset_tab",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},[e("el-tab-pane",{staticClass:"tabs-item",attrs:{label:"邮件通知",name:"first"}},[e("mail-notic")],1),t._v(" "),e("el-tab-pane",{staticClass:"tabs-item",attrs:{label:"短信通知",name:"second"}},[e("short-message")],1)],1)],1)])])},staticRenderFns:[]};var m=e("VU/8")(o,r,!1,function(t){e("/s1e"),e("Qrun")},"data-v-7f282f35",null);s.default=m.exports}});