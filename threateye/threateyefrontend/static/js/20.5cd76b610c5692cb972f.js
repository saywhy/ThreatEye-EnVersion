webpackJsonp([20],{"5AO2":function(t,a){t.exports="data:image/png;base64,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"},"5jW8":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAtFJREFUWAntVztsE0EQfWs7cQiQD7+CIvwKRA2mgYYWgYIQIFEgmkBLLiQpkYWUBhEHKCNRRKJDQgjEp6OjSQctaSIhgYhEApEhDvbw7s4+7+lu13eyDRSstN7d2Zk372ZnP1ZIUxx5DsEZq4nCC8wpu44GoLR+tOvIFgrvsubrk+dJYDiqqEkUvnL0pC7ZwCCmUFRlTSPUbRKYlr2ooASFk3TSy/YB6wJqWA5ZpB3ksQ+buEKcGzTdIOZbthOM0kcXKuf+eKWCp2wLdN4o2xqdttsathJjt4cjuEQShyBSgFKS8YSTcoBtwev/iR/BUUzjoOvKj0AVO2P9DuA7VnEvdi6pUBEjrtSwg+Kl5hJElXpRRpXZcCs6lUJSo64iSnNpQ8ZmAgKHSemEtLsw8HOgC8BJIf8TMOeAG0OFFSbPLi2c65RVtXGSbp4YfSZFG4FnPK1G4cg8Aa4hwyN5lruXh4cJLFZelD6s4SUxTsXN23JgP27ytBIcrhvm8Zg00pYyeojRYzLz7wJHjlFp0aQUyBV+US9dBBSytIgSz+I4ZtWibQkCv0FHtLsjELbotKAbZdYCr9PTtgh8YeDu8xq9TqcjrMvcAY8YzkpKEkPUH2ONvV3NBBReo6RmuAsG6XSKzme4K+ZTOvfVHRkmxtU4WzMB4ALGxZ0/7RkKxjEh/YzIZhyQUZbBEJ2fNc2bCQjc59hlGjfKETqfawwSt+5taCl/PQntBBS/ucvFvAQKb3h+jXLFH3IZLjIJF7grJrE95S74wRyo8JXsPsNiipkA+IrJoZ/G/pNcsMSTayUGwy4qyjoxPpuUzAQEJ/gk+6QZ3uauGGMk0p0Daxjg1+/RcEJdM4GQWjAY0XZFIGynY0/CdpAT2v4zBFYTEu6cWob/OFj8CJSY4cC7zqG3QFJ4jzv44Gr5BNxnVg7nOH7FLF9j/dmVCnzzfGR5vtSfdr8B9s+z2R8bUP0AAAAASUVORK5CYII="},dNw1:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"detail-works",components:{backTitle:e("UeIv").a},data:function(){return{id:0,page_show:!0,loadlinks:"/yiiapi/workorder/download?id=",title_name:"工单详情",activeName:"first",data:{created_at:"1583753107",updated_at:"1583753107"},table:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[],loading:!0,tabsFlag:0},table_reply:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[]},reply:""}},created:function(){var t=this.$route.query.id;this.id=t,this.loadlinks+=t,this.get_list_works_detail(),this.get_reply_works_detail()},methods:{get_list_works_detail:function(){var t=this,a="";switch(this.$route.query.type){case"workorder":a="/yiiapi/workorder/details";break;case"alert_detail":a="/yiiapi/alert/workorder-details";break;case"asset":a="/yiiapi/asset/workorder-details";break;case"lateral":a="/yiiapi/horizontalthreat/workorder-details";break;case"outside":a="/yiiapi/externalthreat/workorder-details";break;case"outreath":a="/yiiapi/outreachthreat//workorder-details"}this.page_show=!0,this.$axios.get(a,{params:{id:this.id,page:this.table.pageNow,rows:this.table.eachPage}}).then(function(a){var e=a.data,s=e.status,i=e.data;0==s&&(i.new_perator=i.perator.join(","),t.data=i,console.log(i),t.page_show=!1,i.assets&&(t.table.tabsFlag=0,i.assets.data.forEach(function(t,a){t.new_label=t.label.join(",")}),t.table.tableData=i.assets.data,t.table.count=i.assets.count,t.table.maxPage=i.assets.maxPage,t.table.pageNow=i.assets.pageNow),i.alerts&&(t.table.tabsFlag=1,t.table.tableData=i.alerts.data,t.table.count=i.alerts.count,t.table.maxPage=i.alerts.maxPage,t.table.pageNow=i.alerts.pageNow))})},get_reply_works_detail:function(){var t=this,a="";switch(this.$route.query.type){case"workorder":a="/yiiapi/workorder/reply-list";break;case"alert_detail":a="/yiiapi/alert/reply-list";break;case"asset":a="/yiiapi/asset/reply-list";break;case"lateral":a="/yiiapi/horizontalthreat/reply-list";break;case"outside":a="/yiiapi/externalthreat/reply-list";break;case"outreath":a="/yiiapi/outreachthreat/reply-list"}this.$axios.get(a,{params:{id:this.id,page:this.table_reply.pageNow,rows:this.table_reply.eachPage}}).then(function(a){var e=a.data,s=e.status,i=e.data;if(0==s){var l=i.data,r=i.count,o=i.maxPage,n=i.pageNow;t.table_reply.tableData=l,t.table_reply.count=r,t.table_reply.maxPage=o,t.table_reply.pageNow=n}})},handleSizeChange:function(t){this.table.eachPage=t,this.table.pageNow=1,this.get_list_works_detail()},handleCurrentChange:function(t){this.table.pageNow=t,this.get_list_works_detail()},handleSizeChangeReply:function(t){this.table_reply.eachPage=t,this.table_reply.pageNow=1,this.get_reply_works_detail()},handleCurrentChangeReply:function(t){this.table_reply.pageNow=t,this.get_reply_works_detail()},worksdownload:function(){var t=this,a=this.data.status;if(1==a||2==a){var e=" /yiiapi/site/download-test?id="+1*this.id;this.$axios.get(e).then(function(a){var e=a.data,s=e.status,i=e.msg;e.data;if(0==s){var l="";switch(t.$route.query.type){case"workorder":l="/yiiapi/workorder/download?id=";break;case"alert_detail":l="/yiiapi/alert/download?id=";break;case"asset":l="/yiiapi/asset/download?id=";break;case"lateral":l="/yiiapi/horizontalthreat/download?id=";break;case"outside":l="/yiiapi/externalthreat/download?id=";break;case"outreath":l="/yiiapi/outreachthreat/download?id="}var r=l+1*t.id;window.location.href=r}else t.$message({type:"warning",message:i})})}else this.$message({message:"当前状态下不允许下载工单！",type:"warning"})},submitReplyClick:function(){var t=this,a="";switch(this.$route.query.type){case"workorder":a="/yiiapi/workorder/reply";break;case"alert_detail":a="/yiiapi/alert/reply";break;case"asset":a="/yiiapi/asset/reply";break;case"lateral":a="/yiiapi/horizontalthreat/reply";break;case"outside":a="/yiiapi/externalthreat/reply";break;case"outreath":a="/yiiapi/outreachthreat/reply"}this.$axios.post(a,{work_order_id:this.id,comment:this.reply}).then(function(a){var e=a.data,s=e.status;e.data;0==s&&(t.$message.success("提交成功。"),t.reply="",t.get_reply_works_detail())})}}},i={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.page_show,expression:"page_show"}],staticClass:"detail-works"},[s("back-title",{attrs:{"title-name":t.title_name}}),t._v(" "),s("div",{staticClass:"detail_base_top"},[t._m(0),t._v(" "),s("div",{staticClass:"top_right"},[s("el-button",{staticClass:"download_btn",on:{click:t.worksdownload}},[t._v("下载")])],1)]),t._v(" "),s("div",{staticClass:"detail_base_mid"},[s("div",{staticClass:"bom_item"},[s("li",[t._m(1),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t.data.name))])]),t._v(" "),s("li",[t._m(2),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t.data.creator))])]),t._v(" "),s("li",[t._m(3),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t.data.new_perator))])]),t._v(" "),s("li",[t._m(4),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t._f("work_status")(t.data.status)))])])]),t._v(" "),s("div",{staticClass:"bom_item"},[s("li",[s("span",{staticClass:"title"},[t._v("优先级：")]),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t._f("priority")(t.data.priority)))])]),t._v(" "),s("li",[s("span",{staticClass:"title"},[t._v("创建时间：")]),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t._f("time")(t.data.created_at)))])]),t._v(" "),s("li",[s("span",{staticClass:"title"},[t._v("更新时间：")]),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t._f("time")(t.data.updated_at)))])]),t._v(" "),s("li",[s("span",{staticClass:"title"},[t._v("备注：")]),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t.data.remarks))])])])]),t._v(" "),s("div",{staticClass:"detail_base_bom"},[s("el-tabs",{model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[s("el-tab-pane",{staticClass:"tabs-item",attrs:{label:0==t.table.tabsFlag?"资产":"告警",name:"first"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.table.tabsFlag,expression:"table.tabsFlag == 0"}]},[s("el-table",{ref:"multipleTable",staticClass:"common-table handle_table_detail",attrs:{"tooltip-effect":"dark",data:t.table.tableData}},[s("el-table-column",{attrs:{prop:"asset_ip",label:"资产","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"new_label","min-width":"120",label:"资产组","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{"min-width":"140",label:"关联威胁"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.category,function(a){return""!=a?s("span",{staticClass:"btn_tag_box"},[s("el-button",{staticClass:"btn_tag",attrs:{type:"primary"}},[t._v("\n                    "+t._s(a)+"\n                  ")])],1):t._e()})}}])}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"high"==a.row.degree,mid_background:"medium"==a.row.degree,low_background:"low"==a.row.degree}},[t._v("\n                  "+t._s(t._f("degree")(a.row.degree)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"失陷确定性","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{class:{fall_certainty:"1"==a.row.fall_certainty}},[t._v("\n                  "+t._s(t._f("certainty")(a.row.fall_certainty)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("risk_status")(a.row.status)))]}}])})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.table.tabsFlag,expression:"table.tabsFlag == 1"}]},[s("el-table",{ref:"multipleTable",staticClass:"handle_table_detail",attrs:{data:t.table.tableData,"tooltip-effect":"dark"}},[s("el-table-column",{attrs:{label:"告警时间",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("time")(a.row.alert_time)))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"category",label:"告警类型","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"indicator",label:"威胁指标","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"src_ip",label:"源地址","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"dest_ip",label:"目的地址","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"application",label:"应用","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"高"==a.row.degree,mid_background:"中"==a.row.degree,low_background:"低"==a.row.degree}},[t._v("\n                  "+t._s(t._f("degree_sino")(a.row.degree)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("alert_status")(a.row.status)))]}}])})],1)],1),t._v(" "),s("el-pagination",{staticClass:"handle_pagination_box",attrs:{"page-sizes":[10,20,50,100],"current-page":t.table.pageNow,"page-size":t.table.eachPage,total:t.table.count,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),t._m(5),t._v(" "),s("div",{staticClass:"detail_base_lst"},[s("ul",{staticClass:"lit-list"},t._l(t.table_reply.tableData,function(a){return s("li",{key:a.id,staticClass:"item"},[s("img",{staticClass:"lst_left_img",attrs:{src:e("5AO2"),alt:""}}),t._v(" "),s("span",{staticClass:"lst_left_title"},[t._v(t._s(a.username))]),t._v(" "),s("span",{staticClass:"lst_left_time"},[s("i",{staticClass:"lst_time"}),t._v(t._s(t._f("time")(a.created_at)))]),t._v(" "),s("p",{staticClass:"lst_left_content"},[t._v(t._s(a.comment))])])}),0),t._v(" "),s("el-pagination",{staticClass:"detail_pagination",attrs:{"current-page":t.table_reply.pageNow,"page-sizes":[10,20,50,100],"page-size":t.table_reply.eachPage,total:t.table_reply.count,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.handleSizeChangeReply,"current-change":t.handleCurrentChangeReply}})],1),t._v(" "),s("div",{staticClass:"detail_base_fot"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply,expression:"reply"}],staticClass:"detail_works_reply",domProps:{value:t.reply},on:{input:function(a){a.target.composing||(t.reply=a.target.value)}}})]),t._v(" "),s("div",{staticClass:"detail_base_anw"},[s("el-button",{staticClass:"detail_works_answer",on:{click:t.submitReplyClick}},[t._v("回复")])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"top_left"},[a("img",{staticClass:"top_left_img",attrs:{src:e("5jW8"),alt:""}}),this._v(" "),a("span",{staticClass:"top_left_title"},[this._v("基本信息")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("i",{staticClass:"b_i b_name"}),this._v("工单名称：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("i",{staticClass:"b_i"}),this._v("创建人：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("i",{staticClass:"b_i"}),this._v("经办人：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("i",{staticClass:"b_i"}),this._v("状态：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"detail_base_cot"},[a("div",{staticClass:"top_left"},[a("img",{staticClass:"top_left_img",attrs:{src:e("5jW8"),alt:""}}),this._v(" "),a("span",{staticClass:"top_left_title"},[this._v("回复记录")])])])}]};var l=e("VU/8")(s,i,!1,function(t){e("uFyW")},"data-v-3dd45282",null);a.default=l.exports},uFyW:function(t,a){}});