webpackJsonp([12],{"+WOX":function(t,s){},"1MGn":function(t,s){},"9z8S":function(t,s){},Qybt:function(t,s){},SRhV:function(t,s){},WyZ0:function(t,s){},mcMA:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("mvHQ"),a=e.n(i),o={name:"outside_set",data:function(){return{outside_set:{switch:!1},outside_list:{ip:[],url:[]},outside_pop:{add:{show:!1,user:"",pswd:""},edit:{show:!1,id:"",user:"",pswd:""}},user_data:{page:1,rows:10},user_list:{},hostip:""}},props:{option:{type:Object,default:function(){}}},mounted:function(){this.get_switch(),this.get_ip(),this.get_user_list(),this.get_list("1"),this.get_list("2")},methods:{get_list:function(t){var s=this;this.$axios.get("/yiiapi/linkage/list",{params:{type:t,page:1,rows:9999}}).then(function(e){console.log(e),"1"==t&&(s.outside_list.ip=e.data.data.data),"2"==t&&(s.outside_list.url=e.data.data.data)}).catch(function(t){console.log(t)})},get_switch:function(){var t=this;this.$axios.get("/yiiapi/externalaccess/get-status").then(function(s){console.log(s),"0"==s.data.data.status?t.outside_set.switch=!1:(t.outside_set.switch=!0,console.log(12121))}).catch(function(t){console.log(t)})},set_switch:function(){var t=this,s=0;s=this.outside_set.switch?1:0,console.log(s),this.$axios.put("/yiiapi/externalaccess/change-status",{status:s}).then(function(e){console.log(e.data),0==e.data.status&&(0==s?t.$message({message:"关闭成功",type:"success"}):t.$message({message:"开启成功",type:"success"})),t.get_switch()}).catch(function(t){console.log(t)})},get_ip:function(){var t=this;this.$axios.get("/yiiapi/linkage/get-hostip").then(function(s){console.log(s.data),t.hostip=s.data.data.url}).catch(function(t){console.log(t)})},get_user_list:function(){var t=this;this.$axios.get("/yiiapi/externalaccess/list",{params:{page:this.user_data.page,rows:this.user_data.rows}}).then(function(s){console.log(s),t.user_list=s.data.data}).catch(function(t){console.log(t)})},add_box:function(){this.outside_pop.add.show=!0,this.outside_pop.add.user="",this.outside_pop.add.pswd=""},add_user:function(){var t=this;return""==this.outside_pop.add.user?(this.$message({message:"请输入用户名",type:"warning"}),!1):""==this.outside_pop.add.pswd?(this.$message({message:"请输入密码",type:"warning"}),!1):void this.$axios.post("/yiiapi/externalaccess/add",{uname:this.outside_pop.add.user,passwd:this.outside_pop.add.pswd}).then(function(s){console.log(s),1==s.data.status?t.$message({message:s.data.msg,type:"error"}):0==s.data.status&&(t.get_user_list(),t.outside_pop.add.show=!1,t.$message({message:"添加账号成功",type:"success"}))}).catch(function(t){console.log(t)})},edit_box:function(t){console.log(t),this.outside_pop.edit.show=!0;var s=a()(t),e=JSON.parse(s);this.outside_pop.edit.id=e.id,this.outside_pop.edit.user=e.uname,this.outside_pop.edit.pswd=e.passwd},edit_user:function(){var t=this;return""==this.outside_pop.edit.user?(this.$message({message:"请输入用户名",type:"warning"}),!1):""==this.outside_pop.add.pswd?(this.$message({message:"请输入密码",type:"warning"}),!1):void this.$axios.put("/yiiapi/externalaccess/edit",{passwd:"dsfdafgfdagr"}).then(function(s){console.log(s.data),1==s.data.status?t.$message({message:s.data.msg,type:"error"}):0==s.data.status&&(t.get_user_list(),t.outside_pop.add.show=!1,t.$message({message:"修改账号成功",type:"success"}))}).catch(function(t){console.log(t)})},del_box:function(t){var s=this;console.log(this.item),this.$confirm("此操作删除信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$axios.delete("/yiiapi/externalaccess/del",{data:{id:t.id}}).then(function(t){console.log(t),0==t.data.status?(s.get_user_list(),s.$message({message:"删除成功！",type:"success"})):s.$message({message:"删除失败！",type:"error"})}).catch(function(t){console.log(t)})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(){},alert_detail:function(){},handleSizeChange:function(t){this.user_data.rows=t,this.user_data.page=1,this.get_user_list()},handleCurrentChange:function(t){this.user_data.page=t,this.get_user_list()},closed_add_box:function(){this.outside_pop.add.show=!1},closed_edit_box:function(){this.outside_pop.edit.show=!1}}},n={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"outside_set"}},[i("div",{staticClass:"set_top"},[i("p",[i("span",[t._v("是否启用:")]),t._v(" "),i("el-switch",{on:{change:t.set_switch},model:{value:t.outside_set.switch,callback:function(s){t.$set(t.outside_set,"switch",s)},expression:"outside_set.switch"}})],1),t._v(" "),i("p",{staticClass:"top_tips"},[t._v("本功能实现和第三方设备如防火墙的联动，第三方设备通过URL地址获取恶意IP列表以及恶意域名列表做告警提示或者拦截。")]),t._v(" "),i("div",{staticClass:"malice_list"},[i("div",{staticClass:"list_left"},[i("p",{staticClass:"item_title"},[t._v("恶意IP列表")]),t._v(" "),i("p",{staticClass:"item_content"},[i("span",[t._v(t._s(t.hostip)+"/MaliciousIP?uname=账号&passwd=密码")])])]),t._v(" "),i("div",{staticClass:"list_right"},[i("p",{staticClass:"item_title"},[t._v("恶意域名列表")]),t._v(" "),i("p",{staticClass:"item_content"},[i("span",[t._v(t._s(t.hostip)+"/MaliciousURL?uname=账号&passwd=密码")])])])])]),t._v(" "),i("el-button",{staticClass:"btn_i",on:{click:t.add_box}},[t._v("创建账号")]),t._v(" "),i("div",{staticClass:"outside_table"},[i("el-table",{ref:"multipleTable",staticClass:"reset_table",staticStyle:{width:"100%"},attrs:{align:"center",data:t.user_list.data,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange,"row-click":t.alert_detail}},[i("el-table-column",{attrs:{prop:"uname",label:"用户名","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"passwd",label:"密码","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("el-button",{staticClass:"btn_edit",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.edit_box(s.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{staticClass:"btn_edit",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.del_box(s.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-pagination",{staticClass:"pagination_box",attrs:{"current-page":t.user_list.pageNow,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next",total:t.user_list.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{staticClass:"add_box pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.outside_pop.add.show},on:{"update:visible":function(s){return t.$set(t.outside_pop.add,"show",s)}}},[i("img",{staticClass:"closed_img",attrs:{src:e("6an9"),alt:""},on:{click:t.closed_add_box}}),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticClass:"mask"}),t._v(" "),i("span",{staticClass:"title_name"},[t._v("创建用户")])]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content_item"},[i("p",[i("span",{staticClass:"title"},[t._v("用户名")]),t._v(" "),i("span",{staticClass:"red_necessary"},[t._v("*")])]),t._v(" "),i("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入用户名",clearable:""},model:{value:t.outside_pop.add.user,callback:function(s){t.$set(t.outside_pop.add,"user",s)},expression:"outside_pop.add.user"}})],1),t._v(" "),i("div",{staticClass:"content_item"},[i("p",[i("span",{staticClass:"title"},[t._v("密码")]),t._v(" "),i("span",{staticClass:"red_necessary"},[t._v("*")])]),t._v(" "),i("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入密码",clearable:"","show-password":""},model:{value:t.outside_pop.add.pswd,callback:function(s){t.$set(t.outside_pop.add,"pswd",s)},expression:"outside_pop.add.pswd"}})],1)]),t._v(" "),i("div",{staticClass:"btn_box"},[i("el-button",{staticClass:"cancel_btn",on:{click:t.closed_add_box}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"ok_btn",on:{click:t.add_user}},[t._v("确定")])],1)]),t._v(" "),i("el-dialog",{staticClass:"add_box pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.outside_pop.edit.show},on:{"update:visible":function(s){return t.$set(t.outside_pop.edit,"show",s)}}},[i("img",{staticClass:"closed_img",attrs:{src:e("6an9"),alt:""},on:{click:t.closed_edit_box}}),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticClass:"mask"}),t._v(" "),i("span",{staticClass:"title_name"},[t._v("编辑用户")])]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content_item"},[i("p",[i("span",{staticClass:"title"},[t._v("密码")]),t._v(" "),i("span",{staticClass:"red_necessary"},[t._v("*")])]),t._v(" "),i("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.outside_pop.edit.pswd,callback:function(s){t.$set(t.outside_pop.edit,"pswd",s)},expression:"outside_pop.edit.pswd"}})],1)]),t._v(" "),i("div",{staticClass:"btn_box"},[i("el-button",{staticClass:"cancel_btn",on:{click:t.closed_edit_box}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"ok_btn",on:{click:t.edit_user}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var l=e("VU/8")(o,n,!1,function(t){e("WyZ0"),e("+WOX")},"data-v-69aed1ab",null).exports,c={name:"outside_list",data:function(){return{outside_list:{ip:[],url:[]},outside_pop:{ip:{show:!1,ip:""},url:{show:!1,url:""}},hostip:""}},props:{option:{type:Object,default:function(){}}},mounted:function(){this.get_list("1"),this.get_list("2"),this.get_ip()},methods:{get_ip:function(){var t=this;this.$axios.get("/yiiapi/linkage/get-hostip").then(function(s){console.log(s.data),t.hostip=s.data.data.url}).catch(function(t){console.log(t)})},get_list:function(t){var s=this;this.$axios.get("/yiiapi/linkage/list",{params:{type:t,page:1,rows:9999}}).then(function(e){console.log(e),"1"==t&&(s.outside_list.ip=e.data.data.data,s.outside_list.ip.forEach(function(t){s.$set(t,"icon",!1),s.$set(t,"class","")})),"2"==t&&(s.outside_list.url=e.data.data.data,s.outside_list.url.forEach(function(t){s.$set(t,"icon",!1),s.$set(t,"class","")}))}).catch(function(t){console.log(t)})},add_ip:function(){this.outside_pop.ip.show=!0,this.outside_pop.ip.ip=""},add_list:function(t){var s=this,e="";switch(t){case"1":if(""==this.outside_pop.ip.ip)return this.$message({message:"请输入ip地址",type:"warning"}),!1;e=this.outside_pop.ip.ip;break;case"2":if(""==this.outside_pop.url.url)return this.$message({message:"请输入域名",type:"warning"}),!1;e=this.outside_pop.url.url}this.$axios.post("/yiiapi/linkage/add",{addr:e,type:t}).then(function(e){if(console.log(e),1==e.data.status)s.$message({message:e.data.msg,type:"error"});else if(0==e.data.status)switch(t){case"1":s.get_list("1"),s.outside_pop.ip.show=!1,s.$message({message:"添加IP成功",type:"success"});break;case"2":s.get_list("2"),s.outside_pop.url.show=!1,s.$message({message:"添加域名成功",type:"success"})}}).catch(function(t){console.log(t)})},add_url:function(){this.outside_pop.url.show=!0},del_list:function(t){var s=this;console.log(t),this.$confirm("此操作删除信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];e.push(t.id),s.$axios.delete("/yiiapi/linkage/del",{data:{id:e}}).then(function(t){console.log(t),0==t.data.status?(s.get_list("1"),s.get_list("2"),s.$message({message:"删除成功！",type:"success"})):s.$message({message:"删除失败！",type:"error"})}).catch(function(t){console.log(t)})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},closed_ip_box:function(){this.outside_pop.ip.show=!1},closed_url_box:function(){this.outside_pop.url.show=!1},enter:function(t){this.outside_list.ip.forEach(function(s,e){t==e&&(s.icon=!0,s.class="active")})},leave:function(t){this.outside_list.ip[t].icon=!1,this.outside_list.ip[t].class=""},enter_url:function(t){this.outside_list.url[t].icon=!0,this.outside_list.url[t].class="active"},leave_url:function(t){this.outside_list.url[t].icon=!1,this.outside_list.url[t].class=""}}},d={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"outside_list"}},[i("div",{staticClass:"outside_content"},[i("div",{staticClass:"content_left content_common"},[i("p",{staticClass:"title"},[t._v("恶意IP列表：")]),t._v(" "),i("p",[i("span",[t._v(t._s(t.hostip)+"/MaliciousIP?uname=账号&passwd=密码")])]),t._v(" "),i("div",{staticClass:"list_box"},[i("p",{staticClass:"list_title_box"},[i("span",[t._v("IP:")]),t._v(" "),i("el-button",{staticClass:"btn_i",on:{click:t.add_ip}},[t._v("添加")])],1),t._v(" "),t._l(t.outside_list.ip,function(s,a){return i("div",{staticClass:"item_box",class:s.class,on:{mouseenter:function(s){return t.enter(a)},mouseleave:function(s){return t.leave(a)}}},[i("span",[t._v(t._s(s.addr))]),t._v(" "),s.icon?i("img",{staticClass:"del_img",attrs:{src:e("ic23"),alt:""},on:{click:function(e){return t.del_list(s)}}}):t._e()])})],2)]),t._v(" "),i("div",{staticClass:"content_right content_common"},[i("p",{staticClass:"title"},[t._v("恶意域名列表：")]),t._v(" "),i("p",[i("span",[t._v(t._s(t.hostip)+"/MaliciousURL?uname=账号&passwd=密码")])]),t._v(" "),i("div",{staticClass:"list_box"},[i("p",{staticClass:"list_title_box"},[i("span",[t._v("域名:")]),t._v(" "),i("el-button",{staticClass:"btn_i",on:{click:t.add_url}},[t._v("添加")])],1),t._v(" "),t._l(t.outside_list.url,function(s,a){return i("div",{staticClass:"item_box",class:""==s.class?"":s.class,on:{mouseenter:function(s){return t.enter_url(a)},mouseleave:function(s){return t.leave_url(a)}}},[i("span",[t._v(t._s(s.addr))]),t._v(" "),s.icon?i("img",{staticClass:"del_img",attrs:{src:e("ic23"),alt:""},on:{click:function(e){return t.del_list(s)}}}):t._e()])})],2)])]),t._v(" "),i("el-dialog",{staticClass:"add_box pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.outside_pop.ip.show},on:{"update:visible":function(s){return t.$set(t.outside_pop.ip,"show",s)}}},[i("img",{staticClass:"closed_img",attrs:{src:e("6an9"),alt:""},on:{click:t.closed_ip_box}}),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticClass:"mask"}),t._v(" "),i("span",{staticClass:"title_name"},[t._v("添加IP")])]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content_item"},[i("p",[i("span",{staticClass:"title"},[t._v("IP")]),t._v(" "),i("span",{staticClass:"red_necessary"},[t._v("*")])]),t._v(" "),i("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入IP",clearable:""},model:{value:t.outside_pop.ip.ip,callback:function(s){t.$set(t.outside_pop.ip,"ip",s)},expression:"outside_pop.ip.ip"}})],1)]),t._v(" "),i("div",{staticClass:"btn_box"},[i("el-button",{staticClass:"cancel_btn",on:{click:t.closed_ip_box}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"ok_btn",on:{click:function(s){return t.add_list("1")}}},[t._v("确定")])],1)]),t._v(" "),i("el-dialog",{staticClass:"add_box pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.outside_pop.url.show},on:{"update:visible":function(s){return t.$set(t.outside_pop.url,"show",s)}}},[i("img",{staticClass:"closed_img",attrs:{src:e("6an9"),alt:""},on:{click:t.closed_url_box}}),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticClass:"mask"}),t._v(" "),i("span",{staticClass:"title_name"},[t._v("添加域名")])]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content_item"},[i("p",[i("span",{staticClass:"title"},[t._v("域名")]),t._v(" "),i("span",{staticClass:"red_necessary"},[t._v("*")])]),t._v(" "),i("el-input",{staticClass:"select_box",attrs:{placeholder:"请输入域名",clearable:""},model:{value:t.outside_pop.url.url,callback:function(s){t.$set(t.outside_pop.url,"url",s)},expression:"outside_pop.url.url"}})],1)]),t._v(" "),i("div",{staticClass:"btn_box"},[i("el-button",{staticClass:"cancel_btn",on:{click:t.closed_url_box}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"ok_btn",on:{click:function(s){return t.add_list("2")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var _={components:{outsideSet:l,outsideList:e("VU/8")(c,d,!1,function(t){e("SRhV"),e("9z8S")},"data-v-aa7b18f4",null).exports},name:"system_control_react",data:function(){return{activeName:"first",tab_show:{first:!0,second:!1}}},methods:{handleClick:function(t,s){switch(console.log(t),t.name){case"first":this.tab_show.first=!0,this.tab_show.second=!1;break;case"second":this.tab_show.first=!1,this.tab_show.second=!0}}}},u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container",attrs:{id:"system_control_react"}},[e("div",{staticClass:"content_box"},[e("el-tabs",{staticClass:"reset_tab",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},[e("el-tab-pane",{staticClass:"tabs-item",attrs:{label:"外部动态列表设置",name:"first"}},[t.tab_show.first?e("outside-set"):t._e()],1),t._v(" "),e("el-tab-pane",{staticClass:"tabs-item",attrs:{label:"外部动态列表",name:"second"}},[t.tab_show.second?e("outside-list"):t._e()],1)],1)],1)])},staticRenderFns:[]};var p=e("VU/8")(_,u,!1,function(t){e("Qybt"),e("1MGn")},"data-v-3ac419ca",null);s.default=p.exports}});